{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = useTabTrap;\n\nvar _react = require(\"react\");\n\nvar _useEventListener = _interopRequireDefault(require(\"@restart/hooks/useEventListener\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nconst defaultSelector = ['input', 'textarea', 'select', 'button:not([tabindex=\"-1\"])', '[tabindex=\"0\"]'].join(',');\n\nconst getDocument = () => document;\n\nfunction useTabTrap(ref, selector = defaultSelector) {\n  const startedRef = (0, _react.useRef)(false);\n  (0, _useEventListener.default)(getDocument, 'keydown', event => {\n    if (!startedRef.current || !ref.current || event.key !== 'Tab') {\n      return;\n    }\n\n    const tabbables = ref.current.querySelectorAll(selector);\n\n    if (event.shiftKey && event.target === tabbables[0]) {\n      tabbables[tabbables.length - 1].focus();\n      event.preventDefault();\n    } else if (!event.shiftKey && event.target === tabbables[tabbables.length - 1] || !ref.current.contains(event.target)) {\n      tabbables[0].focus();\n      event.preventDefault();\n    }\n  });\n  return (0, _react.useMemo)(() => ({\n    focus() {\n      const tabbables = ref.current.querySelectorAll(selector);\n      const first = tabbables[0];\n      if (first) first.focus();\n    },\n\n    start() {\n      startedRef.current = true;\n    },\n\n    stop() {\n      startedRef.current = false;\n    }\n\n  }), [ref, selector]);\n}","map":{"version":3,"sources":["D:/workspace2021/projectmanagement/client/node_modules/react-widgets/lib/useTabTrap.js"],"names":["Object","defineProperty","exports","value","default","useTabTrap","_react","require","_useEventListener","_interopRequireDefault","obj","__esModule","defaultSelector","join","getDocument","document","ref","selector","startedRef","useRef","event","current","key","tabbables","querySelectorAll","shiftKey","target","length","focus","preventDefault","contains","useMemo","first","start","stop"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAACE,OAAR,GAAkBC,UAAlB;;AAEA,IAAIC,MAAM,GAAGC,OAAO,CAAC,OAAD,CAApB;;AAEA,IAAIC,iBAAiB,GAAGC,sBAAsB,CAACF,OAAO,CAAC,iCAAD,CAAR,CAA9C;;AAEA,SAASE,sBAAT,CAAgCC,GAAhC,EAAqC;AAAE,SAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;AAAEN,IAAAA,OAAO,EAAEM;AAAX,GAArC;AAAwD;;AAE/F,MAAME,eAAe,GAAG,CAAC,OAAD,EAAU,UAAV,EAAsB,QAAtB,EAAgC,6BAAhC,EAA+D,gBAA/D,EAAiFC,IAAjF,CAAsF,GAAtF,CAAxB;;AAEA,MAAMC,WAAW,GAAG,MAAMC,QAA1B;;AAEA,SAASV,UAAT,CAAoBW,GAApB,EAAyBC,QAAQ,GAAGL,eAApC,EAAqD;AACnD,QAAMM,UAAU,GAAG,CAAC,GAAGZ,MAAM,CAACa,MAAX,EAAmB,KAAnB,CAAnB;AACA,GAAC,GAAGX,iBAAiB,CAACJ,OAAtB,EAA+BU,WAA/B,EAA4C,SAA5C,EAAuDM,KAAK,IAAI;AAC9D,QAAI,CAACF,UAAU,CAACG,OAAZ,IAAuB,CAACL,GAAG,CAACK,OAA5B,IAAuCD,KAAK,CAACE,GAAN,KAAc,KAAzD,EAAgE;AAC9D;AACD;;AAED,UAAMC,SAAS,GAAGP,GAAG,CAACK,OAAJ,CAAYG,gBAAZ,CAA6BP,QAA7B,CAAlB;;AAEA,QAAIG,KAAK,CAACK,QAAN,IAAkBL,KAAK,CAACM,MAAN,KAAiBH,SAAS,CAAC,CAAD,CAAhD,EAAqD;AACnDA,MAAAA,SAAS,CAACA,SAAS,CAACI,MAAV,GAAmB,CAApB,CAAT,CAAgCC,KAAhC;AACAR,MAAAA,KAAK,CAACS,cAAN;AACD,KAHD,MAGO,IAAI,CAACT,KAAK,CAACK,QAAP,IAAmBL,KAAK,CAACM,MAAN,KAAiBH,SAAS,CAACA,SAAS,CAACI,MAAV,GAAmB,CAApB,CAA7C,IAAuE,CAACX,GAAG,CAACK,OAAJ,CAAYS,QAAZ,CAAqBV,KAAK,CAACM,MAA3B,CAA5E,EAAgH;AACrHH,MAAAA,SAAS,CAAC,CAAD,CAAT,CAAaK,KAAb;AACAR,MAAAA,KAAK,CAACS,cAAN;AACD;AACF,GAdD;AAeA,SAAO,CAAC,GAAGvB,MAAM,CAACyB,OAAX,EAAoB,OAAO;AAChCH,IAAAA,KAAK,GAAG;AACN,YAAML,SAAS,GAAGP,GAAG,CAACK,OAAJ,CAAYG,gBAAZ,CAA6BP,QAA7B,CAAlB;AACA,YAAMe,KAAK,GAAGT,SAAS,CAAC,CAAD,CAAvB;AACA,UAAIS,KAAJ,EAAWA,KAAK,CAACJ,KAAN;AACZ,KAL+B;;AAOhCK,IAAAA,KAAK,GAAG;AACNf,MAAAA,UAAU,CAACG,OAAX,GAAqB,IAArB;AACD,KAT+B;;AAWhCa,IAAAA,IAAI,GAAG;AACLhB,MAAAA,UAAU,CAACG,OAAX,GAAqB,KAArB;AACD;;AAb+B,GAAP,CAApB,EAeH,CAACL,GAAD,EAAMC,QAAN,CAfG,CAAP;AAgBD","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = useTabTrap;\n\nvar _react = require(\"react\");\n\nvar _useEventListener = _interopRequireDefault(require(\"@restart/hooks/useEventListener\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst defaultSelector = ['input', 'textarea', 'select', 'button:not([tabindex=\"-1\"])', '[tabindex=\"0\"]'].join(',');\n\nconst getDocument = () => document;\n\nfunction useTabTrap(ref, selector = defaultSelector) {\n  const startedRef = (0, _react.useRef)(false);\n  (0, _useEventListener.default)(getDocument, 'keydown', event => {\n    if (!startedRef.current || !ref.current || event.key !== 'Tab') {\n      return;\n    }\n\n    const tabbables = ref.current.querySelectorAll(selector);\n\n    if (event.shiftKey && event.target === tabbables[0]) {\n      tabbables[tabbables.length - 1].focus();\n      event.preventDefault();\n    } else if (!event.shiftKey && event.target === tabbables[tabbables.length - 1] || !ref.current.contains(event.target)) {\n      tabbables[0].focus();\n      event.preventDefault();\n    }\n  });\n  return (0, _react.useMemo)(() => ({\n    focus() {\n      const tabbables = ref.current.querySelectorAll(selector);\n      const first = tabbables[0];\n      if (first) first.focus();\n    },\n\n    start() {\n      startedRef.current = true;\n    },\n\n    stop() {\n      startedRef.current = false;\n    }\n\n  }), [ref, selector]);\n}"]},"metadata":{},"sourceType":"script"}