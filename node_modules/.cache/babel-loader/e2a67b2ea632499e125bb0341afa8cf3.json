{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _querySelectorAll = _interopRequireDefault(require(\"dom-helpers/querySelectorAll\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _uncontrollable = require(\"uncontrollable\");\n\nvar _Button = _interopRequireDefault(require(\"./Button\"));\n\nvar _DateTimePartInput = _interopRequireDefault(require(\"./DateTimePartInput\"));\n\nvar _Icon = require(\"./Icon\");\n\nvar _Widget = _interopRequireDefault(require(\"./Widget\"));\n\nvar _dates = _interopRequireDefault(require(\"./dates\"));\n\nvar _useFocusManager = _interopRequireDefault(require(\"./useFocusManager\"));\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function () {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nconst selectTextRange = el => {\n  if (el instanceof HTMLInputElement) return el.select();\n  const range = document.createRange();\n  range.selectNodeContents(el);\n  const selection = window.getSelection();\n\n  if (selection) {\n    selection.removeAllRanges();\n    selection.addRange(range);\n  }\n}; // prettier-ignore\n\n\nconst isEmptyValue = (p, precision) => p.hours == null && p.minutes == null && (precision != 'seconds' && precision !== 'milliseconds' || p.seconds == null) && (precision !== 'milliseconds' || p.milliseconds == null); // prettier-ignore\n\n\nconst isPartialValue = (p, precision) => p.hours == null || p.minutes == null || (precision === 'seconds' || precision === 'milliseconds') && p.seconds == null || precision === 'milliseconds' && p.milliseconds == null;\n\nconst getValueParts = (value, use12HourClock) => {\n  let hours, minutes, seconds, milliseconds;\n  let meridiem = 'AM';\n\n  if (value) {\n    hours = value.getHours();\n\n    if (use12HourClock) {\n      meridiem = hours < 12 ? 'AM' : 'PM';\n      hours = hours % 12 || 12;\n    }\n\n    minutes = value.getMinutes();\n    seconds = value.getSeconds();\n    milliseconds = value.getMilliseconds();\n  }\n\n  return {\n    hours,\n    minutes,\n    seconds,\n    milliseconds,\n    meridiem\n  };\n};\n\nconst TEST_VALID = {\n  hours: /^([1]?[0-9]|2[0-3])$/,\n  hours12: /^(1[0-2]|0?[1-9])$/,\n  minutes: /^([0-5]?\\d)$/,\n  seconds: /^([0-5]?\\d)$/,\n  milliseconds: /^(\\d{1,3})$/\n};\nconst TEST_COMPLETE = {\n  hours: /^([3-9]|\\d{2})$/,\n  hours12: /^(\\d{2}|[2-9])$/,\n  minutes: /^(d{2}|[6-9])$/,\n  seconds: /^(d{2}|[6-9])$/,\n  milliseconds: /^(\\d{3})$/\n};\n\nfunction testPart(value, part, use12HourClock, tests) {\n  const key = part === 'hours' && use12HourClock ? 'hours12' : part;\n  return tests[key].test(value);\n}\n\nconst isValid = (value, part, use12HourClock) => testPart(value, part, use12HourClock, TEST_VALID);\n\nconst isComplete = (value, part, use12HourClock) => testPart(value, part, use12HourClock, TEST_COMPLETE);\n\nconst propTypes = {\n  value: _propTypes.default.instanceOf(Date),\n  onChange: _propTypes.default.func,\n\n  /**\n   * The default date used to construct a new time when the `value` is empty\n   *\n   * @default new Date()\n   **/\n  datePart: _propTypes.default.instanceOf(Date),\n\n  /**\n   * Use a 12 hour clock (with AM/PM) instead of 24 hour one.\n   * The configured localizer may provide a default value .\n   **/\n  use12HourClock: _propTypes.default.bool,\n\n  /** Time part values will be padded by `0` */\n  padValues: _propTypes.default.bool,\n\n  /** The string character used to pad empty, or cleared values */\n  emptyCharacter: _propTypes.default.string,\n\n  /** Hide the input clear button */\n  noClearButton: _propTypes.default.bool,\n  disabled: _propTypes.default.bool,\n  readOnly: _propTypes.default.bool,\n\n  /** Controls how precise of a time can be input **/\n  precision: _propTypes.default.oneOf(['minutes', 'seconds', 'milliseconds']).isRequired,\n\n  /**\n   * The seperator between hours and minutes\n   * @default ':'\n   */\n  hoursAddon: _propTypes.default.node,\n\n  /**\n   * The seperator between hours and minutes\n   * @default ':'\n   */\n  minutesAddon: _propTypes.default.node,\n\n  /**\n   * The seperator between hours and minutes\n   * @default ':'\n   */\n  secondsAddon: _propTypes.default.node,\n\n  /**\n   * The seperator between hours and minutes\n   * @default '.'\n   */\n  millisecondsAddon: _propTypes.default.node\n};\nconst defaultProps = {\n  hoursAddon: ':',\n  padValues: true,\n  precision: 'minutes',\n  emptyCharacter: '-'\n}; // let count = 0\n\nfunction useTimePartState(value, use12HourClock) {\n  const [state, setState] = (0, _react.useState)(() => ({\n    value,\n    use12HourClock,\n    timeParts: getValueParts(value, use12HourClock)\n  }));\n  const setTimeParts = (0, _react.useCallback)(timeParts => setState(s => _objectSpread(_objectSpread({}, s), {}, {\n    timeParts\n  })), [setState]);\n\n  if (state.value !== value || state.use12HourClock !== use12HourClock) {\n    // count++\n    // if (count < 100)\n    setState({\n      value,\n      use12HourClock,\n      timeParts: getValueParts(value, use12HourClock)\n    });\n  }\n\n  return [state.timeParts, setTimeParts];\n}\n\nfunction TimeInput(uncontrolledProps) {\n  const _useUncontrolled = (0, _uncontrollable.useUncontrolled)(uncontrolledProps, {\n    value: 'onChange'\n  }),\n        {\n    value,\n    use12HourClock,\n    padValues: pad,\n    emptyCharacter,\n    precision,\n    noClearButton,\n    hoursAddon,\n    minutesAddon,\n    secondsAddon,\n    millisecondsAddon,\n    className,\n    disabled,\n    readOnly,\n    datePart,\n    onChange,\n    onBlur,\n    onFocus\n  } = _useUncontrolled,\n        props = _objectWithoutProperties(_useUncontrolled, [\"value\", \"use12HourClock\", \"padValues\", \"emptyCharacter\", \"precision\", \"noClearButton\", \"hoursAddon\", \"minutesAddon\", \"secondsAddon\", \"millisecondsAddon\", \"className\", \"disabled\", \"readOnly\", \"datePart\", \"onChange\", \"onBlur\", \"onFocus\"]);\n\n  let minsAddon = minutesAddon !== undefined ? minutesAddon : precision === 'seconds' || precision === 'milliseconds' ? ':' : '';\n  let secsAddon = secondsAddon !== undefined ? secondsAddon : precision === 'milliseconds' ? ':' : '';\n  const ref = (0, _react.useRef)(null);\n  const hourRef = (0, _react.useRef)(null);\n  const [focusEvents, focused] = (0, _useFocusManager.default)(ref, {\n    disabled,\n    onBlur,\n    onFocus\n  }, {\n    didHandle: (focused, e) => {\n      var _hourRef$current;\n\n      if (!focused) return;\n      if (!e.target.dataset.focusable) (_hourRef$current = hourRef.current) === null || _hourRef$current === void 0 ? void 0 : _hourRef$current.focus();else select(e.target);\n    }\n  });\n  const [timeParts, setTimeParts] = useTimePartState(value !== null && value !== void 0 ? value : null, use12HourClock !== null && use12HourClock !== void 0 ? use12HourClock : false);\n\n  function getDatePart() {\n    return _dates.default.startOf(datePart || new Date(), 'day');\n  }\n\n  const getMin = part => part === 'hours' ? 1 : 0;\n\n  const getMax = part => {\n    if (part === 'hours') return use12HourClock ? 12 : 23;\n    if (part === 'milliseconds') return 999;\n    return 59;\n  };\n\n  function select(target = document.activeElement) {\n    window.Promise.resolve().then(() => {\n      if (focused) selectTextRange(target);\n    });\n  }\n  /**\n   * Handlers\n   */\n\n\n  const handleClear = () => {\n    var _hourRef$current2;\n\n    (_hourRef$current2 = hourRef.current) === null || _hourRef$current2 === void 0 ? void 0 : _hourRef$current2.focus();\n    if (value) onChange(null);else setTimeParts(getValueParts(null));\n  };\n\n  const handleChange = (part, event) => {\n    const currentValue = timeParts[part];\n    const {\n      target\n    } = event;\n    const rawValue = target.value;\n    let strValue = `${currentValue || ''}${rawValue}`;\n    let numValue = +strValue;\n\n    if (isNaN(numValue) || strValue && !isValid(strValue, part, use12HourClock !== null && use12HourClock !== void 0 ? use12HourClock : false)) {\n      // the combined value is now past the max or invalid so try the single\n      // digit and \"start over\" filling the value\n      if (isValid(rawValue, part, use12HourClock !== null && use12HourClock !== void 0 ? use12HourClock : false) && !isNaN(+rawValue)) {\n        // change the effective current value\n        strValue = rawValue;\n        numValue = +rawValue;\n      } else {\n        return event.preventDefault();\n      }\n    }\n\n    const nextValue = target.value ? numValue : null;\n    notifyChange({\n      [part]: nextValue\n    });\n\n    if (nextValue != null && isComplete(strValue, part, use12HourClock !== null && use12HourClock !== void 0 ? use12HourClock : false)) {\n      focusNext(event.currentTarget, +1);\n    } else {\n      select(target);\n    }\n  };\n\n  const handleSelect = ({\n    target\n  }) => {\n    select(target);\n  };\n\n  const handleKeyDown = (part, event) => {\n    const {\n      key\n    } = event;\n    const input = event.currentTarget;\n    const {\n      selectionStart: start,\n      selectionEnd: end\n    } = input;\n    const isRTL = getComputedStyle(input).getPropertyValue('direction') === 'rtl';\n    const isMeridiem = part === 'meridiem';\n    const isNext = key === (isRTL ? 'ArrowLeft' : 'ArrowRight');\n    const isPrev = key === (isRTL ? 'ArrowRight' : 'ArrowLeft');\n\n    if (key === 'ArrowUp') {\n      event.preventDefault();\n      increment(part, 1);\n    }\n\n    if (key === 'ArrowDown') {\n      event.preventDefault();\n      increment(part, -1);\n    }\n\n    if (isPrev && (isMeridiem || start - 1 < 0)) {\n      event.preventDefault();\n      focusNext(input, -1);\n    }\n\n    if (isNext && (isMeridiem || input.value.length <= end + 1)) {\n      event.preventDefault();\n      focusNext(input, +1);\n    }\n\n    if (readOnly && key !== 'Tab') {\n      event.preventDefault();\n    }\n\n    if (isMeridiem) {\n      if (key === 'a' || key === 'A') notifyChange({\n        meridiem: 'AM'\n      });\n      if (key === 'p' || key === 'P') notifyChange({\n        meridiem: 'PM'\n      });\n    }\n  };\n\n  const increment = (part, inc) => {\n    let nextPart = timeParts[part];\n\n    if (part === 'meridiem') {\n      nextPart = nextPart === 'AM' ? 'PM' : 'AM';\n    } else {\n      nextPart = (nextPart || 0) + inc;\n      if (!isValid(String(nextPart), part, use12HourClock !== null && use12HourClock !== void 0 ? use12HourClock : false)) return;\n    }\n\n    notifyChange({\n      [part]: nextPart\n    });\n    select();\n  };\n\n  function notifyChange(updates) {\n    const nextTimeParts = _objectSpread(_objectSpread({}, timeParts), updates);\n\n    if (value && isEmptyValue(nextTimeParts, precision)) {\n      return onChange(null);\n    }\n\n    if (isPartialValue(nextTimeParts, precision)) return setTimeParts(nextTimeParts);\n    let {\n      hours,\n      minutes,\n      seconds,\n      milliseconds,\n      meridiem\n    } = nextTimeParts;\n    let nextDate = new Date(value || getDatePart());\n\n    if (use12HourClock) {\n      if (hours === 12) hours = 0;\n      hours += meridiem === 'PM' ? 12 : 0;\n    }\n\n    nextDate.setHours(hours);\n    nextDate.setMinutes(minutes);\n    if (seconds != null) nextDate.setSeconds(seconds);\n    if (milliseconds != null) nextDate.setMilliseconds(milliseconds);\n    onChange(nextDate, {\n      lastValue: value,\n      timeParts\n    });\n  }\n\n  function focusNext(input, delta) {\n    let nodes = (0, _querySelectorAll.default)(ref.current, '* [data-focusable]');\n    let next = nodes[nodes.indexOf(input) + delta];\n    next === null || next === void 0 ? void 0 : next.focus();\n    select(next);\n  }\n\n  const {\n    hours,\n    minutes,\n    seconds,\n    milliseconds,\n    meridiem\n  } = timeParts;\n  const showClear = !isEmptyValue(timeParts, precision);\n  return /*#__PURE__*/_react.default.createElement(_Widget.default, Object.assign({}, props, {\n    role: \"group\",\n    ref: ref\n  }, focusEvents, {\n    focused: focused,\n    disabled: disabled,\n    readOnly: readOnly,\n    className: (0, _classnames.default)(className, 'rw-time-input rw-widget-input')\n  }), /*#__PURE__*/_react.default.createElement(_DateTimePartInput.default, {\n    size: 2,\n    pad: pad ? 2 : undefined,\n    value: hours,\n    disabled: disabled,\n    readOnly: readOnly,\n    \"aria-label\": \"hours\",\n    min: getMin('hours'),\n    max: getMax('hours'),\n    ref: hourRef,\n    emptyChar: emptyCharacter,\n    onSelect: handleSelect,\n    onChange: e => handleChange('hours', e),\n    onKeyDown: e => handleKeyDown('hours', e)\n  }), hoursAddon && /*#__PURE__*/_react.default.createElement(\"span\", null, hoursAddon), /*#__PURE__*/_react.default.createElement(_DateTimePartInput.default, {\n    size: 2,\n    pad: pad ? 2 : undefined,\n    value: minutes,\n    disabled: disabled,\n    readOnly: readOnly,\n    \"aria-label\": \"minutes\",\n    min: getMin('minutes'),\n    max: getMax('minutes'),\n    emptyChar: emptyCharacter,\n    onSelect: handleSelect,\n    onChange: e => handleChange('minutes', e),\n    onKeyDown: e => handleKeyDown('minutes', e)\n  }), minsAddon && /*#__PURE__*/_react.default.createElement(\"span\", null, minsAddon), (precision === 'seconds' || precision === 'milliseconds') && /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, /*#__PURE__*/_react.default.createElement(_DateTimePartInput.default, {\n    size: 2,\n    pad: pad ? 2 : undefined,\n    value: seconds,\n    disabled: disabled,\n    readOnly: readOnly,\n    \"aria-label\": \"seconds\",\n    min: getMin('seconds'),\n    max: getMax('seconds'),\n    emptyChar: emptyCharacter,\n    onSelect: handleSelect,\n    onChange: e => handleChange('seconds', e),\n    onKeyDown: e => handleKeyDown('seconds', e)\n  }), secsAddon && /*#__PURE__*/_react.default.createElement(\"span\", null, secsAddon)), precision === 'milliseconds' && /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, /*#__PURE__*/_react.default.createElement(_DateTimePartInput.default, {\n    size: 3,\n    pad: pad ? 3 : undefined,\n    value: milliseconds,\n    disabled: disabled,\n    readOnly: readOnly,\n    \"aria-label\": \"milliseconds\",\n    min: getMin('milliseconds'),\n    max: getMax('milliseconds'),\n    emptyChar: emptyCharacter,\n    onSelect: handleSelect,\n    onChange: e => handleChange('milliseconds', e),\n    onKeyDown: e => handleKeyDown('milliseconds', e)\n  }), millisecondsAddon && /*#__PURE__*/_react.default.createElement(\"span\", null, millisecondsAddon)), use12HourClock && /*#__PURE__*/_react.default.createElement(\"div\", {\n    role: \"listbox\",\n    \"aria-label\": \"AM/PM\",\n    \"aria-disabled\": disabled,\n    \"aria-readonly\": readOnly,\n    className: \"rw-time-part-meridiem\"\n  }, /*#__PURE__*/_react.default.createElement(\"div\", {\n    \"data-focusable\": true,\n    role: \"option\",\n    \"aria-atomic\": true,\n    \"aria-selected\": true,\n    \"aria-setsize\": 2,\n    \"aria-live\": \"assertive\",\n    \"aria-disabled\": disabled,\n    \"aria-readonly\": readOnly,\n    \"aria-posinset\": meridiem === 'AM' ? 1 : 2,\n    tabIndex: !disabled ? 0 : void 0,\n    onFocus: handleSelect,\n    onSelect: handleSelect,\n    onKeyDown: e => handleKeyDown('meridiem', e)\n  }, /*#__PURE__*/_react.default.createElement(\"abbr\", null, meridiem))), !noClearButton && /*#__PURE__*/_react.default.createElement(_Button.default, {\n    label: 'clear input',\n    onClick: handleClear,\n    disabled: disabled || readOnly,\n    className: (0, _classnames.default)('rw-time-input-clear', showClear && 'rw-show')\n  }, _Icon.times));\n}\n\nTimeInput.propTypes = propTypes;\nTimeInput.defaultProps = defaultProps;\nvar _default = TimeInput;\nexports.default = _default;","map":{"version":3,"sources":["D:/workspace2021/projectmanagement/client/node_modules/react-widgets/lib/TimeInput.js"],"names":["Object","defineProperty","exports","value","default","_classnames","_interopRequireDefault","require","_querySelectorAll","_propTypes","_react","_interopRequireWildcard","_uncontrollable","_Button","_DateTimePartInput","_Icon","_Widget","_dates","_useFocusManager","_getRequireWildcardCache","WeakMap","cache","obj","__esModule","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_objectWithoutProperties","source","excluded","target","_objectWithoutPropertiesLoose","i","getOwnPropertySymbols","sourceSymbolKeys","length","indexOf","propertyIsEnumerable","sourceKeys","keys","ownKeys","object","enumerableOnly","symbols","filter","sym","enumerable","push","apply","_objectSpread","arguments","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","configurable","writable","selectTextRange","el","HTMLInputElement","select","range","document","createRange","selectNodeContents","selection","window","getSelection","removeAllRanges","addRange","isEmptyValue","p","precision","hours","minutes","seconds","milliseconds","isPartialValue","getValueParts","use12HourClock","meridiem","getHours","getMinutes","getSeconds","getMilliseconds","TEST_VALID","hours12","TEST_COMPLETE","testPart","part","tests","test","isValid","isComplete","propTypes","instanceOf","Date","onChange","func","datePart","bool","padValues","emptyCharacter","string","noClearButton","disabled","readOnly","oneOf","isRequired","hoursAddon","node","minutesAddon","secondsAddon","millisecondsAddon","defaultProps","useTimePartState","state","setState","useState","timeParts","setTimeParts","useCallback","s","TimeInput","uncontrolledProps","_useUncontrolled","useUncontrolled","pad","className","onBlur","onFocus","props","minsAddon","undefined","secsAddon","ref","useRef","hourRef","focusEvents","focused","didHandle","e","_hourRef$current","dataset","focusable","current","focus","getDatePart","startOf","getMin","getMax","activeElement","Promise","resolve","then","handleClear","_hourRef$current2","handleChange","event","currentValue","rawValue","strValue","numValue","isNaN","preventDefault","nextValue","notifyChange","focusNext","currentTarget","handleSelect","handleKeyDown","input","selectionStart","start","selectionEnd","end","isRTL","getComputedStyle","getPropertyValue","isMeridiem","isNext","isPrev","increment","inc","nextPart","String","updates","nextTimeParts","nextDate","setHours","setMinutes","setSeconds","setMilliseconds","lastValue","delta","nodes","next","showClear","createElement","assign","role","size","min","max","emptyChar","onSelect","onKeyDown","Fragment","tabIndex","label","onClick","times","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _querySelectorAll = _interopRequireDefault(require(\"dom-helpers/querySelectorAll\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _uncontrollable = require(\"uncontrollable\");\n\nvar _Button = _interopRequireDefault(require(\"./Button\"));\n\nvar _DateTimePartInput = _interopRequireDefault(require(\"./DateTimePartInput\"));\n\nvar _Icon = require(\"./Icon\");\n\nvar _Widget = _interopRequireDefault(require(\"./Widget\"));\n\nvar _dates = _interopRequireDefault(require(\"./dates\"));\n\nvar _useFocusManager = _interopRequireDefault(require(\"./useFocusManager\"));\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nconst selectTextRange = el => {\n  if (el instanceof HTMLInputElement) return el.select();\n  const range = document.createRange();\n  range.selectNodeContents(el);\n  const selection = window.getSelection();\n\n  if (selection) {\n    selection.removeAllRanges();\n    selection.addRange(range);\n  }\n}; // prettier-ignore\n\n\nconst isEmptyValue = (p, precision) => p.hours == null && p.minutes == null && (precision != 'seconds' && precision !== 'milliseconds' || p.seconds == null) && (precision !== 'milliseconds' || p.milliseconds == null); // prettier-ignore\n\n\nconst isPartialValue = (p, precision) => p.hours == null || p.minutes == null || (precision === 'seconds' || precision === 'milliseconds') && p.seconds == null || precision === 'milliseconds' && p.milliseconds == null;\n\nconst getValueParts = (value, use12HourClock) => {\n  let hours, minutes, seconds, milliseconds;\n  let meridiem = 'AM';\n\n  if (value) {\n    hours = value.getHours();\n\n    if (use12HourClock) {\n      meridiem = hours < 12 ? 'AM' : 'PM';\n      hours = hours % 12 || 12;\n    }\n\n    minutes = value.getMinutes();\n    seconds = value.getSeconds();\n    milliseconds = value.getMilliseconds();\n  }\n\n  return {\n    hours,\n    minutes,\n    seconds,\n    milliseconds,\n    meridiem\n  };\n};\n\nconst TEST_VALID = {\n  hours: /^([1]?[0-9]|2[0-3])$/,\n  hours12: /^(1[0-2]|0?[1-9])$/,\n  minutes: /^([0-5]?\\d)$/,\n  seconds: /^([0-5]?\\d)$/,\n  milliseconds: /^(\\d{1,3})$/\n};\nconst TEST_COMPLETE = {\n  hours: /^([3-9]|\\d{2})$/,\n  hours12: /^(\\d{2}|[2-9])$/,\n  minutes: /^(d{2}|[6-9])$/,\n  seconds: /^(d{2}|[6-9])$/,\n  milliseconds: /^(\\d{3})$/\n};\n\nfunction testPart(value, part, use12HourClock, tests) {\n  const key = part === 'hours' && use12HourClock ? 'hours12' : part;\n  return tests[key].test(value);\n}\n\nconst isValid = (value, part, use12HourClock) => testPart(value, part, use12HourClock, TEST_VALID);\n\nconst isComplete = (value, part, use12HourClock) => testPart(value, part, use12HourClock, TEST_COMPLETE);\n\nconst propTypes = {\n  value: _propTypes.default.instanceOf(Date),\n  onChange: _propTypes.default.func,\n\n  /**\n   * The default date used to construct a new time when the `value` is empty\n   *\n   * @default new Date()\n   **/\n  datePart: _propTypes.default.instanceOf(Date),\n\n  /**\n   * Use a 12 hour clock (with AM/PM) instead of 24 hour one.\n   * The configured localizer may provide a default value .\n   **/\n  use12HourClock: _propTypes.default.bool,\n\n  /** Time part values will be padded by `0` */\n  padValues: _propTypes.default.bool,\n\n  /** The string character used to pad empty, or cleared values */\n  emptyCharacter: _propTypes.default.string,\n\n  /** Hide the input clear button */\n  noClearButton: _propTypes.default.bool,\n  disabled: _propTypes.default.bool,\n  readOnly: _propTypes.default.bool,\n\n  /** Controls how precise of a time can be input **/\n  precision: _propTypes.default.oneOf(['minutes', 'seconds', 'milliseconds']).isRequired,\n\n  /**\n   * The seperator between hours and minutes\n   * @default ':'\n   */\n  hoursAddon: _propTypes.default.node,\n\n  /**\n   * The seperator between hours and minutes\n   * @default ':'\n   */\n  minutesAddon: _propTypes.default.node,\n\n  /**\n   * The seperator between hours and minutes\n   * @default ':'\n   */\n  secondsAddon: _propTypes.default.node,\n\n  /**\n   * The seperator between hours and minutes\n   * @default '.'\n   */\n  millisecondsAddon: _propTypes.default.node\n};\nconst defaultProps = {\n  hoursAddon: ':',\n  padValues: true,\n  precision: 'minutes',\n  emptyCharacter: '-'\n};\n\n// let count = 0\nfunction useTimePartState(value, use12HourClock) {\n  const [state, setState] = (0, _react.useState)(() => ({\n    value,\n    use12HourClock,\n    timeParts: getValueParts(value, use12HourClock)\n  }));\n  const setTimeParts = (0, _react.useCallback)(timeParts => setState(s => _objectSpread(_objectSpread({}, s), {}, {\n    timeParts\n  })), [setState]);\n\n  if (state.value !== value || state.use12HourClock !== use12HourClock) {\n    // count++\n    // if (count < 100)\n    setState({\n      value,\n      use12HourClock,\n      timeParts: getValueParts(value, use12HourClock)\n    });\n  }\n\n  return [state.timeParts, setTimeParts];\n}\n\nfunction TimeInput(uncontrolledProps) {\n  const _useUncontrolled = (0, _uncontrollable.useUncontrolled)(uncontrolledProps, {\n    value: 'onChange'\n  }),\n        {\n    value,\n    use12HourClock,\n    padValues: pad,\n    emptyCharacter,\n    precision,\n    noClearButton,\n    hoursAddon,\n    minutesAddon,\n    secondsAddon,\n    millisecondsAddon,\n    className,\n    disabled,\n    readOnly,\n    datePart,\n    onChange,\n    onBlur,\n    onFocus\n  } = _useUncontrolled,\n        props = _objectWithoutProperties(_useUncontrolled, [\"value\", \"use12HourClock\", \"padValues\", \"emptyCharacter\", \"precision\", \"noClearButton\", \"hoursAddon\", \"minutesAddon\", \"secondsAddon\", \"millisecondsAddon\", \"className\", \"disabled\", \"readOnly\", \"datePart\", \"onChange\", \"onBlur\", \"onFocus\"]);\n\n  let minsAddon = minutesAddon !== undefined ? minutesAddon : precision === 'seconds' || precision === 'milliseconds' ? ':' : '';\n  let secsAddon = secondsAddon !== undefined ? secondsAddon : precision === 'milliseconds' ? ':' : '';\n  const ref = (0, _react.useRef)(null);\n  const hourRef = (0, _react.useRef)(null);\n  const [focusEvents, focused] = (0, _useFocusManager.default)(ref, {\n    disabled,\n    onBlur,\n    onFocus\n  }, {\n    didHandle: (focused, e) => {\n      var _hourRef$current;\n\n      if (!focused) return;\n      if (!e.target.dataset.focusable) (_hourRef$current = hourRef.current) === null || _hourRef$current === void 0 ? void 0 : _hourRef$current.focus();else select(e.target);\n    }\n  });\n  const [timeParts, setTimeParts] = useTimePartState(value !== null && value !== void 0 ? value : null, use12HourClock !== null && use12HourClock !== void 0 ? use12HourClock : false);\n\n  function getDatePart() {\n    return _dates.default.startOf(datePart || new Date(), 'day');\n  }\n\n  const getMin = part => part === 'hours' ? 1 : 0;\n\n  const getMax = part => {\n    if (part === 'hours') return use12HourClock ? 12 : 23;\n    if (part === 'milliseconds') return 999;\n    return 59;\n  };\n\n  function select(target = document.activeElement) {\n    window.Promise.resolve().then(() => {\n      if (focused) selectTextRange(target);\n    });\n  }\n  /**\n   * Handlers\n   */\n\n\n  const handleClear = () => {\n    var _hourRef$current2;\n\n    (_hourRef$current2 = hourRef.current) === null || _hourRef$current2 === void 0 ? void 0 : _hourRef$current2.focus();\n    if (value) onChange(null);else setTimeParts(getValueParts(null));\n  };\n\n  const handleChange = (part, event) => {\n    const currentValue = timeParts[part];\n    const {\n      target\n    } = event;\n    const rawValue = target.value;\n    let strValue = `${currentValue || ''}${rawValue}`;\n    let numValue = +strValue;\n\n    if (isNaN(numValue) || strValue && !isValid(strValue, part, use12HourClock !== null && use12HourClock !== void 0 ? use12HourClock : false)) {\n      // the combined value is now past the max or invalid so try the single\n      // digit and \"start over\" filling the value\n      if (isValid(rawValue, part, use12HourClock !== null && use12HourClock !== void 0 ? use12HourClock : false) && !isNaN(+rawValue)) {\n        // change the effective current value\n        strValue = rawValue;\n        numValue = +rawValue;\n      } else {\n        return event.preventDefault();\n      }\n    }\n\n    const nextValue = target.value ? numValue : null;\n    notifyChange({\n      [part]: nextValue\n    });\n\n    if (nextValue != null && isComplete(strValue, part, use12HourClock !== null && use12HourClock !== void 0 ? use12HourClock : false)) {\n      focusNext(event.currentTarget, +1);\n    } else {\n      select(target);\n    }\n  };\n\n  const handleSelect = ({\n    target\n  }) => {\n    select(target);\n  };\n\n  const handleKeyDown = (part, event) => {\n    const {\n      key\n    } = event;\n    const input = event.currentTarget;\n    const {\n      selectionStart: start,\n      selectionEnd: end\n    } = input;\n    const isRTL = getComputedStyle(input).getPropertyValue('direction') === 'rtl';\n    const isMeridiem = part === 'meridiem';\n    const isNext = key === (isRTL ? 'ArrowLeft' : 'ArrowRight');\n    const isPrev = key === (isRTL ? 'ArrowRight' : 'ArrowLeft');\n\n    if (key === 'ArrowUp') {\n      event.preventDefault();\n      increment(part, 1);\n    }\n\n    if (key === 'ArrowDown') {\n      event.preventDefault();\n      increment(part, -1);\n    }\n\n    if (isPrev && (isMeridiem || start - 1 < 0)) {\n      event.preventDefault();\n      focusNext(input, -1);\n    }\n\n    if (isNext && (isMeridiem || input.value.length <= end + 1)) {\n      event.preventDefault();\n      focusNext(input, +1);\n    }\n\n    if (readOnly && key !== 'Tab') {\n      event.preventDefault();\n    }\n\n    if (isMeridiem) {\n      if (key === 'a' || key === 'A') notifyChange({\n        meridiem: 'AM'\n      });\n      if (key === 'p' || key === 'P') notifyChange({\n        meridiem: 'PM'\n      });\n    }\n  };\n\n  const increment = (part, inc) => {\n    let nextPart = timeParts[part];\n\n    if (part === 'meridiem') {\n      nextPart = nextPart === 'AM' ? 'PM' : 'AM';\n    } else {\n      nextPart = (nextPart || 0) + inc;\n      if (!isValid(String(nextPart), part, use12HourClock !== null && use12HourClock !== void 0 ? use12HourClock : false)) return;\n    }\n\n    notifyChange({\n      [part]: nextPart\n    });\n    select();\n  };\n\n  function notifyChange(updates) {\n    const nextTimeParts = _objectSpread(_objectSpread({}, timeParts), updates);\n\n    if (value && isEmptyValue(nextTimeParts, precision)) {\n      return onChange(null);\n    }\n\n    if (isPartialValue(nextTimeParts, precision)) return setTimeParts(nextTimeParts);\n    let {\n      hours,\n      minutes,\n      seconds,\n      milliseconds,\n      meridiem\n    } = nextTimeParts;\n    let nextDate = new Date(value || getDatePart());\n\n    if (use12HourClock) {\n      if (hours === 12) hours = 0;\n      hours += meridiem === 'PM' ? 12 : 0;\n    }\n\n    nextDate.setHours(hours);\n    nextDate.setMinutes(minutes);\n    if (seconds != null) nextDate.setSeconds(seconds);\n    if (milliseconds != null) nextDate.setMilliseconds(milliseconds);\n    onChange(nextDate, {\n      lastValue: value,\n      timeParts\n    });\n  }\n\n  function focusNext(input, delta) {\n    let nodes = (0, _querySelectorAll.default)(ref.current, '* [data-focusable]');\n    let next = nodes[nodes.indexOf(input) + delta];\n    next === null || next === void 0 ? void 0 : next.focus();\n    select(next);\n  }\n\n  const {\n    hours,\n    minutes,\n    seconds,\n    milliseconds,\n    meridiem\n  } = timeParts;\n  const showClear = !isEmptyValue(timeParts, precision);\n  return /*#__PURE__*/_react.default.createElement(_Widget.default, Object.assign({}, props, {\n    role: \"group\",\n    ref: ref\n  }, focusEvents, {\n    focused: focused,\n    disabled: disabled,\n    readOnly: readOnly,\n    className: (0, _classnames.default)(className, 'rw-time-input rw-widget-input')\n  }), /*#__PURE__*/_react.default.createElement(_DateTimePartInput.default, {\n    size: 2,\n    pad: pad ? 2 : undefined,\n    value: hours,\n    disabled: disabled,\n    readOnly: readOnly,\n    \"aria-label\": \"hours\",\n    min: getMin('hours'),\n    max: getMax('hours'),\n    ref: hourRef,\n    emptyChar: emptyCharacter,\n    onSelect: handleSelect,\n    onChange: e => handleChange('hours', e),\n    onKeyDown: e => handleKeyDown('hours', e)\n  }), hoursAddon && /*#__PURE__*/_react.default.createElement(\"span\", null, hoursAddon), /*#__PURE__*/_react.default.createElement(_DateTimePartInput.default, {\n    size: 2,\n    pad: pad ? 2 : undefined,\n    value: minutes,\n    disabled: disabled,\n    readOnly: readOnly,\n    \"aria-label\": \"minutes\",\n    min: getMin('minutes'),\n    max: getMax('minutes'),\n    emptyChar: emptyCharacter,\n    onSelect: handleSelect,\n    onChange: e => handleChange('minutes', e),\n    onKeyDown: e => handleKeyDown('minutes', e)\n  }), minsAddon && /*#__PURE__*/_react.default.createElement(\"span\", null, minsAddon), (precision === 'seconds' || precision === 'milliseconds') && /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, /*#__PURE__*/_react.default.createElement(_DateTimePartInput.default, {\n    size: 2,\n    pad: pad ? 2 : undefined,\n    value: seconds,\n    disabled: disabled,\n    readOnly: readOnly,\n    \"aria-label\": \"seconds\",\n    min: getMin('seconds'),\n    max: getMax('seconds'),\n    emptyChar: emptyCharacter,\n    onSelect: handleSelect,\n    onChange: e => handleChange('seconds', e),\n    onKeyDown: e => handleKeyDown('seconds', e)\n  }), secsAddon && /*#__PURE__*/_react.default.createElement(\"span\", null, secsAddon)), precision === 'milliseconds' && /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, /*#__PURE__*/_react.default.createElement(_DateTimePartInput.default, {\n    size: 3,\n    pad: pad ? 3 : undefined,\n    value: milliseconds,\n    disabled: disabled,\n    readOnly: readOnly,\n    \"aria-label\": \"milliseconds\",\n    min: getMin('milliseconds'),\n    max: getMax('milliseconds'),\n    emptyChar: emptyCharacter,\n    onSelect: handleSelect,\n    onChange: e => handleChange('milliseconds', e),\n    onKeyDown: e => handleKeyDown('milliseconds', e)\n  }), millisecondsAddon && /*#__PURE__*/_react.default.createElement(\"span\", null, millisecondsAddon)), use12HourClock && /*#__PURE__*/_react.default.createElement(\"div\", {\n    role: \"listbox\",\n    \"aria-label\": \"AM/PM\",\n    \"aria-disabled\": disabled,\n    \"aria-readonly\": readOnly,\n    className: \"rw-time-part-meridiem\"\n  }, /*#__PURE__*/_react.default.createElement(\"div\", {\n    \"data-focusable\": true,\n    role: \"option\",\n    \"aria-atomic\": true,\n    \"aria-selected\": true,\n    \"aria-setsize\": 2,\n    \"aria-live\": \"assertive\",\n    \"aria-disabled\": disabled,\n    \"aria-readonly\": readOnly,\n    \"aria-posinset\": meridiem === 'AM' ? 1 : 2,\n    tabIndex: !disabled ? 0 : void 0,\n    onFocus: handleSelect,\n    onSelect: handleSelect,\n    onKeyDown: e => handleKeyDown('meridiem', e)\n  }, /*#__PURE__*/_react.default.createElement(\"abbr\", null, meridiem))), !noClearButton && /*#__PURE__*/_react.default.createElement(_Button.default, {\n    label: 'clear input',\n    onClick: handleClear,\n    disabled: disabled || readOnly,\n    className: (0, _classnames.default)('rw-time-input-clear', showClear && 'rw-show')\n  }, _Icon.times));\n}\n\nTimeInput.propTypes = propTypes;\nTimeInput.defaultProps = defaultProps;\nvar _default = TimeInput;\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}