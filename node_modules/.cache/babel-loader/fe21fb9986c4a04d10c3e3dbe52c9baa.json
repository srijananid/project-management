{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useHandleSelect = useHandleSelect;\nexports.default = exports.useScrollFocusedIntoView = void 0;\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _ListOption = _interopRequireDefault(require(\"./ListOption\"));\n\nvar _ListOptionGroup = _interopRequireDefault(require(\"./ListOptionGroup\"));\n\nvar _messages = require(\"./messages\");\n\nvar CustomPropTypes = _interopRequireWildcard(require(\"./PropTypes\"));\n\nvar _ = require(\"./_\");\n\nvar _WidgetHelpers = require(\"./WidgetHelpers\");\n\nvar _useMutationObserver = _interopRequireDefault(require(\"@restart/hooks/useMutationObserver\"));\n\nvar _useCallbackRef = _interopRequireDefault(require(\"@restart/hooks/useCallbackRef\"));\n\nvar _useMergedRefs = _interopRequireDefault(require(\"@restart/hooks/useMergedRefs\"));\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function () {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nconst whitelist = ['style', 'className', 'role', 'id', 'autocomplete', 'size', 'tabIndex', 'maxLength', 'name'];\nconst whitelistRegex = [/^aria-/, /^data-/, /^on[A-Z]\\w+/];\n\nfunction pickElementProps(props) {\n  const result = {};\n  Object.keys(props).forEach(key => {\n    if (whitelist.indexOf(key) !== -1 || whitelistRegex.some(r => !!key.match(r))) result[key] = props[key];\n  });\n  return result;\n}\n\nconst propTypes = {\n  data: _propTypes.default.array,\n  dataKey: CustomPropTypes.accessor,\n  textField: CustomPropTypes.accessor,\n  onSelect: _propTypes.default.func,\n  onMove: _propTypes.default.func,\n  onHoverOption: _propTypes.default.func,\n  optionComponent: _propTypes.default.elementType,\n  renderItem: _propTypes.default.func,\n  renderGroup: _propTypes.default.func,\n  focusedItem: _propTypes.default.any,\n  selectedItem: _propTypes.default.any,\n  searchTerm: _propTypes.default.string,\n  disabled: CustomPropTypes.disabled.acceptsArray,\n  messages: _propTypes.default.shape({\n    emptyList: _propTypes.default.func.isRequired\n  })\n};\n\nconst useScrollFocusedIntoView = (element, observeChanges = false) => {\n  const scrollIntoView = (0, _react.useCallback)(() => {\n    if (!element) return;\n    let selectedItem = element.querySelector('[data-rw-focused]');\n\n    if (selectedItem && selectedItem.scrollIntoView) {\n      selectedItem.scrollIntoView({\n        block: 'nearest',\n        inline: 'nearest'\n      });\n    }\n  }, [element]);\n  (0, _useMutationObserver.default)(observeChanges ? element : null, {\n    subtree: true,\n    attributes: true,\n    attributeFilter: ['data-rw-focused']\n  }, scrollIntoView);\n  return scrollIntoView;\n};\n\nexports.useScrollFocusedIntoView = useScrollFocusedIntoView;\n\nfunction useHandleSelect(multiple, dataItems, onChange) {\n  return (dataItem, event) => {\n    if (multiple === false) {\n      onChange(dataItem, {\n        dataItem,\n        lastValue: dataItems[0],\n        originalEvent: event\n      });\n      return;\n    }\n\n    const checked = dataItems.includes(dataItem);\n    onChange(checked ? dataItems.filter(d => d !== dataItem) : [...dataItems, dataItem], {\n      dataItem,\n      lastValue: dataItems,\n      action: checked ? 'remove' : 'insert',\n      originalEvent: event\n    });\n  };\n}\n\nconst List = _react.default.forwardRef(function List(_ref, outerRef) {\n  var _elementProps$role;\n\n  let {\n    multiple = false,\n    data = [],\n    value,\n    onChange,\n    accessors,\n    className,\n    messages,\n    disabled,\n    renderItem,\n    renderGroup,\n    searchTerm,\n    groupBy,\n    elementRef,\n    optionComponent: Option = _ListOption.default\n  } = _ref,\n      props = _objectWithoutProperties(_ref, [\"multiple\", \"data\", \"value\", \"onChange\", \"accessors\", \"className\", \"messages\", \"disabled\", \"renderItem\", \"renderGroup\", \"searchTerm\", \"groupBy\", \"elementRef\", \"optionComponent\"]);\n\n  const id = (0, _WidgetHelpers.useInstanceId)();\n  const dataItems = (0, _.makeArray)(value, multiple);\n  const groupedData = (0, _react.useMemo)(() => groupBy ? (0, _.groupBySortedKeys)(groupBy, data) : undefined, [data, groupBy]);\n  const [element, ref] = (0, _useCallbackRef.default)();\n  const disabledItems = (0, _.toItemArray)(disabled);\n  const {\n    emptyList\n  } = (0, _messages.useMessagesWithDefaults)(messages);\n  const divRef = (0, _useMergedRefs.default)(ref, elementRef);\n  const handleSelect = useHandleSelect(multiple, dataItems, onChange);\n  const scrollIntoView = useScrollFocusedIntoView(element, true);\n  let elementProps = pickElementProps(props);\n  (0, _react.useImperativeHandle)(outerRef, () => ({\n    scrollIntoView\n  }), [scrollIntoView]);\n\n  function renderOption(item, idx) {\n    const textValue = accessors.text(item);\n    const itemIsDisabled = disabledItems.includes(item);\n    const itemIsSelected = dataItems.includes(item);\n    return /*#__PURE__*/_react.default.createElement(Option, {\n      dataItem: item,\n      key: `item_${idx}`,\n      onSelect: handleSelect,\n      disabled: itemIsDisabled,\n      selected: itemIsSelected\n    }, renderItem ? renderItem({\n      item,\n      searchTerm,\n      index: idx,\n      text: textValue,\n      // TODO: probably remove\n      value: accessors.value(item),\n      disabled: itemIsDisabled\n    }) : textValue);\n  }\n\n  const children = groupedData ? groupedData.map(([group, items], idx) => /*#__PURE__*/_react.default.createElement(\"div\", {\n    role: \"group\",\n    key: `group_${idx}`\n  }, /*#__PURE__*/_react.default.createElement(_ListOptionGroup.default, null, renderGroup ? renderGroup({\n    group\n  }) : group), items.map(renderOption))) : data.map(renderOption);\n  return /*#__PURE__*/_react.default.createElement(\"div\", Object.assign({\n    id: id,\n    tabIndex: 0,\n    ref: divRef\n  }, elementProps, {\n    \"aria-multiselectable\": !!multiple,\n    className: (0, _classnames.default)(className, 'rw-list'),\n    role: (_elementProps$role = elementProps.role) !== null && _elementProps$role !== void 0 ? _elementProps$role : 'listbox'\n  }), _react.default.Children.count(children) ? children : /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: \"rw-list-empty\"\n  }, emptyList()));\n});\n\nList.displayName = 'List';\nList.propTypes = propTypes;\nvar _default = List;\nexports.default = _default;","map":{"version":3,"sources":["D:/workspace2021/projectmanagement/client/node_modules/react-widgets/lib/List.js"],"names":["Object","defineProperty","exports","value","useHandleSelect","default","useScrollFocusedIntoView","_classnames","_interopRequireDefault","require","_propTypes","_react","_interopRequireWildcard","_ListOption","_ListOptionGroup","_messages","CustomPropTypes","_","_WidgetHelpers","_useMutationObserver","_useCallbackRef","_useMergedRefs","_getRequireWildcardCache","WeakMap","cache","obj","__esModule","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_objectWithoutProperties","source","excluded","target","_objectWithoutPropertiesLoose","i","getOwnPropertySymbols","sourceSymbolKeys","length","indexOf","propertyIsEnumerable","sourceKeys","keys","whitelist","whitelistRegex","pickElementProps","props","result","forEach","some","r","match","propTypes","data","array","dataKey","accessor","textField","onSelect","func","onMove","onHoverOption","optionComponent","elementType","renderItem","renderGroup","focusedItem","any","selectedItem","searchTerm","string","disabled","acceptsArray","messages","shape","emptyList","isRequired","element","observeChanges","scrollIntoView","useCallback","querySelector","block","inline","subtree","attributes","attributeFilter","multiple","dataItems","onChange","dataItem","event","lastValue","originalEvent","checked","includes","filter","d","action","List","forwardRef","_ref","outerRef","_elementProps$role","accessors","className","groupBy","elementRef","Option","id","useInstanceId","makeArray","groupedData","useMemo","groupBySortedKeys","undefined","ref","disabledItems","toItemArray","useMessagesWithDefaults","divRef","handleSelect","elementProps","useImperativeHandle","renderOption","item","idx","textValue","text","itemIsDisabled","itemIsSelected","createElement","selected","index","children","map","group","items","role","assign","tabIndex","Children","count","displayName","_default"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAACE,eAAR,GAA0BA,eAA1B;AACAF,OAAO,CAACG,OAAR,GAAkBH,OAAO,CAACI,wBAAR,GAAmC,KAAK,CAA1D;;AAEA,IAAIC,WAAW,GAAGC,sBAAsB,CAACC,OAAO,CAAC,YAAD,CAAR,CAAxC;;AAEA,IAAIC,UAAU,GAAGF,sBAAsB,CAACC,OAAO,CAAC,YAAD,CAAR,CAAvC;;AAEA,IAAIE,MAAM,GAAGC,uBAAuB,CAACH,OAAO,CAAC,OAAD,CAAR,CAApC;;AAEA,IAAII,WAAW,GAAGL,sBAAsB,CAACC,OAAO,CAAC,cAAD,CAAR,CAAxC;;AAEA,IAAIK,gBAAgB,GAAGN,sBAAsB,CAACC,OAAO,CAAC,mBAAD,CAAR,CAA7C;;AAEA,IAAIM,SAAS,GAAGN,OAAO,CAAC,YAAD,CAAvB;;AAEA,IAAIO,eAAe,GAAGJ,uBAAuB,CAACH,OAAO,CAAC,aAAD,CAAR,CAA7C;;AAEA,IAAIQ,CAAC,GAAGR,OAAO,CAAC,KAAD,CAAf;;AAEA,IAAIS,cAAc,GAAGT,OAAO,CAAC,iBAAD,CAA5B;;AAEA,IAAIU,oBAAoB,GAAGX,sBAAsB,CAACC,OAAO,CAAC,oCAAD,CAAR,CAAjD;;AAEA,IAAIW,eAAe,GAAGZ,sBAAsB,CAACC,OAAO,CAAC,+BAAD,CAAR,CAA5C;;AAEA,IAAIY,cAAc,GAAGb,sBAAsB,CAACC,OAAO,CAAC,8BAAD,CAAR,CAA3C;;AAEA,SAASa,wBAAT,GAAoC;AAAE,MAAI,OAAOC,OAAP,KAAmB,UAAvB,EAAmC,OAAO,IAAP;AAAa,MAAIC,KAAK,GAAG,IAAID,OAAJ,EAAZ;;AAA2BD,EAAAA,wBAAwB,GAAG,YAAY;AAAE,WAAOE,KAAP;AAAe,GAAxD;;AAA0D,SAAOA,KAAP;AAAe;;AAE1L,SAASZ,uBAAT,CAAiCa,GAAjC,EAAsC;AAAE,MAAIA,GAAG,IAAIA,GAAG,CAACC,UAAf,EAA2B;AAAE,WAAOD,GAAP;AAAa;;AAAC,MAAIA,GAAG,KAAK,IAAR,IAAgB,OAAOA,GAAP,KAAe,QAAf,IAA2B,OAAOA,GAAP,KAAe,UAA9D,EAA0E;AAAE,WAAO;AAAEpB,MAAAA,OAAO,EAAEoB;AAAX,KAAP;AAA0B;;AAAC,MAAID,KAAK,GAAGF,wBAAwB,EAApC;;AAAwC,MAAIE,KAAK,IAAIA,KAAK,CAACG,GAAN,CAAUF,GAAV,CAAb,EAA6B;AAAE,WAAOD,KAAK,CAACI,GAAN,CAAUH,GAAV,CAAP;AAAwB;;AAAC,MAAII,MAAM,GAAG,EAAb;AAAiB,MAAIC,qBAAqB,GAAG9B,MAAM,CAACC,cAAP,IAAyBD,MAAM,CAAC+B,wBAA5D;;AAAsF,OAAK,IAAIC,GAAT,IAAgBP,GAAhB,EAAqB;AAAE,QAAIzB,MAAM,CAACiC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCV,GAArC,EAA0CO,GAA1C,CAAJ,EAAoD;AAAE,UAAII,IAAI,GAAGN,qBAAqB,GAAG9B,MAAM,CAAC+B,wBAAP,CAAgCN,GAAhC,EAAqCO,GAArC,CAAH,GAA+C,IAA/E;;AAAqF,UAAII,IAAI,KAAKA,IAAI,CAACR,GAAL,IAAYQ,IAAI,CAACC,GAAtB,CAAR,EAAoC;AAAErC,QAAAA,MAAM,CAACC,cAAP,CAAsB4B,MAAtB,EAA8BG,GAA9B,EAAmCI,IAAnC;AAA2C,OAAjF,MAAuF;AAAEP,QAAAA,MAAM,CAACG,GAAD,CAAN,GAAcP,GAAG,CAACO,GAAD,CAAjB;AAAyB;AAAE;AAAE;;AAACH,EAAAA,MAAM,CAACxB,OAAP,GAAiBoB,GAAjB;;AAAsB,MAAID,KAAJ,EAAW;AAAEA,IAAAA,KAAK,CAACa,GAAN,CAAUZ,GAAV,EAAeI,MAAf;AAAyB;;AAAC,SAAOA,MAAP;AAAgB;;AAEvuB,SAASrB,sBAAT,CAAgCiB,GAAhC,EAAqC;AAAE,SAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;AAAEpB,IAAAA,OAAO,EAAEoB;AAAX,GAArC;AAAwD;;AAE/F,SAASa,wBAAT,CAAkCC,MAAlC,EAA0CC,QAA1C,EAAoD;AAAE,MAAID,MAAM,IAAI,IAAd,EAAoB,OAAO,EAAP;;AAAW,MAAIE,MAAM,GAAGC,6BAA6B,CAACH,MAAD,EAASC,QAAT,CAA1C;;AAA8D,MAAIR,GAAJ,EAASW,CAAT;;AAAY,MAAI3C,MAAM,CAAC4C,qBAAX,EAAkC;AAAE,QAAIC,gBAAgB,GAAG7C,MAAM,CAAC4C,qBAAP,CAA6BL,MAA7B,CAAvB;;AAA6D,SAAKI,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGE,gBAAgB,CAACC,MAAjC,EAAyCH,CAAC,EAA1C,EAA8C;AAAEX,MAAAA,GAAG,GAAGa,gBAAgB,CAACF,CAAD,CAAtB;AAA2B,UAAIH,QAAQ,CAACO,OAAT,CAAiBf,GAAjB,KAAyB,CAA7B,EAAgC;AAAU,UAAI,CAAChC,MAAM,CAACiC,SAAP,CAAiBe,oBAAjB,CAAsCb,IAAtC,CAA2CI,MAA3C,EAAmDP,GAAnD,CAAL,EAA8D;AAAUS,MAAAA,MAAM,CAACT,GAAD,CAAN,GAAcO,MAAM,CAACP,GAAD,CAApB;AAA4B;AAAE;;AAAC,SAAOS,MAAP;AAAgB;;AAE5e,SAASC,6BAAT,CAAuCH,MAAvC,EAA+CC,QAA/C,EAAyD;AAAE,MAAID,MAAM,IAAI,IAAd,EAAoB,OAAO,EAAP;AAAW,MAAIE,MAAM,GAAG,EAAb;AAAiB,MAAIQ,UAAU,GAAGjD,MAAM,CAACkD,IAAP,CAAYX,MAAZ,CAAjB;AAAsC,MAAIP,GAAJ,EAASW,CAAT;;AAAY,OAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGM,UAAU,CAACH,MAA3B,EAAmCH,CAAC,EAApC,EAAwC;AAAEX,IAAAA,GAAG,GAAGiB,UAAU,CAACN,CAAD,CAAhB;AAAqB,QAAIH,QAAQ,CAACO,OAAT,CAAiBf,GAAjB,KAAyB,CAA7B,EAAgC;AAAUS,IAAAA,MAAM,CAACT,GAAD,CAAN,GAAcO,MAAM,CAACP,GAAD,CAApB;AAA4B;;AAAC,SAAOS,MAAP;AAAgB;;AAEnT,MAAMU,SAAS,GAAG,CAAC,OAAD,EAAU,WAAV,EAAuB,MAAvB,EAA+B,IAA/B,EAAqC,cAArC,EAAqD,MAArD,EAA6D,UAA7D,EAAyE,WAAzE,EAAsF,MAAtF,CAAlB;AACA,MAAMC,cAAc,GAAG,CAAC,QAAD,EAAW,QAAX,EAAqB,aAArB,CAAvB;;AAEA,SAASC,gBAAT,CAA0BC,KAA1B,EAAiC;AAC/B,QAAMC,MAAM,GAAG,EAAf;AACAvD,EAAAA,MAAM,CAACkD,IAAP,CAAYI,KAAZ,EAAmBE,OAAnB,CAA2BxB,GAAG,IAAI;AAChC,QAAImB,SAAS,CAACJ,OAAV,CAAkBf,GAAlB,MAA2B,CAAC,CAA5B,IAAiCoB,cAAc,CAACK,IAAf,CAAoBC,CAAC,IAAI,CAAC,CAAC1B,GAAG,CAAC2B,KAAJ,CAAUD,CAAV,CAA3B,CAArC,EAA+EH,MAAM,CAACvB,GAAD,CAAN,GAAcsB,KAAK,CAACtB,GAAD,CAAnB;AAChF,GAFD;AAGA,SAAOuB,MAAP;AACD;;AAED,MAAMK,SAAS,GAAG;AAChBC,EAAAA,IAAI,EAAEnD,UAAU,CAACL,OAAX,CAAmByD,KADT;AAEhBC,EAAAA,OAAO,EAAE/C,eAAe,CAACgD,QAFT;AAGhBC,EAAAA,SAAS,EAAEjD,eAAe,CAACgD,QAHX;AAIhBE,EAAAA,QAAQ,EAAExD,UAAU,CAACL,OAAX,CAAmB8D,IAJb;AAKhBC,EAAAA,MAAM,EAAE1D,UAAU,CAACL,OAAX,CAAmB8D,IALX;AAMhBE,EAAAA,aAAa,EAAE3D,UAAU,CAACL,OAAX,CAAmB8D,IANlB;AAOhBG,EAAAA,eAAe,EAAE5D,UAAU,CAACL,OAAX,CAAmBkE,WAPpB;AAQhBC,EAAAA,UAAU,EAAE9D,UAAU,CAACL,OAAX,CAAmB8D,IARf;AAShBM,EAAAA,WAAW,EAAE/D,UAAU,CAACL,OAAX,CAAmB8D,IAThB;AAUhBO,EAAAA,WAAW,EAAEhE,UAAU,CAACL,OAAX,CAAmBsE,GAVhB;AAWhBC,EAAAA,YAAY,EAAElE,UAAU,CAACL,OAAX,CAAmBsE,GAXjB;AAYhBE,EAAAA,UAAU,EAAEnE,UAAU,CAACL,OAAX,CAAmByE,MAZf;AAahBC,EAAAA,QAAQ,EAAE/D,eAAe,CAAC+D,QAAhB,CAAyBC,YAbnB;AAchBC,EAAAA,QAAQ,EAAEvE,UAAU,CAACL,OAAX,CAAmB6E,KAAnB,CAAyB;AACjCC,IAAAA,SAAS,EAAEzE,UAAU,CAACL,OAAX,CAAmB8D,IAAnB,CAAwBiB;AADF,GAAzB;AAdM,CAAlB;;AAmBA,MAAM9E,wBAAwB,GAAG,CAAC+E,OAAD,EAAUC,cAAc,GAAG,KAA3B,KAAqC;AACpE,QAAMC,cAAc,GAAG,CAAC,GAAG5E,MAAM,CAAC6E,WAAX,EAAwB,MAAM;AACnD,QAAI,CAACH,OAAL,EAAc;AACd,QAAIT,YAAY,GAAGS,OAAO,CAACI,aAAR,CAAsB,mBAAtB,CAAnB;;AAEA,QAAIb,YAAY,IAAIA,YAAY,CAACW,cAAjC,EAAiD;AAC/CX,MAAAA,YAAY,CAACW,cAAb,CAA4B;AAC1BG,QAAAA,KAAK,EAAE,SADmB;AAE1BC,QAAAA,MAAM,EAAE;AAFkB,OAA5B;AAID;AACF,GAVsB,EAUpB,CAACN,OAAD,CAVoB,CAAvB;AAWA,GAAC,GAAGlE,oBAAoB,CAACd,OAAzB,EAAkCiF,cAAc,GAAGD,OAAH,GAAa,IAA7D,EAAmE;AACjEO,IAAAA,OAAO,EAAE,IADwD;AAEjEC,IAAAA,UAAU,EAAE,IAFqD;AAGjEC,IAAAA,eAAe,EAAE,CAAC,iBAAD;AAHgD,GAAnE,EAIGP,cAJH;AAKA,SAAOA,cAAP;AACD,CAlBD;;AAoBArF,OAAO,CAACI,wBAAR,GAAmCA,wBAAnC;;AAEA,SAASF,eAAT,CAAyB2F,QAAzB,EAAmCC,SAAnC,EAA8CC,QAA9C,EAAwD;AACtD,SAAO,CAACC,QAAD,EAAWC,KAAX,KAAqB;AAC1B,QAAIJ,QAAQ,KAAK,KAAjB,EAAwB;AACtBE,MAAAA,QAAQ,CAACC,QAAD,EAAW;AACjBA,QAAAA,QADiB;AAEjBE,QAAAA,SAAS,EAAEJ,SAAS,CAAC,CAAD,CAFH;AAGjBK,QAAAA,aAAa,EAAEF;AAHE,OAAX,CAAR;AAKA;AACD;;AAED,UAAMG,OAAO,GAAGN,SAAS,CAACO,QAAV,CAAmBL,QAAnB,CAAhB;AACAD,IAAAA,QAAQ,CAACK,OAAO,GAAGN,SAAS,CAACQ,MAAV,CAAiBC,CAAC,IAAIA,CAAC,KAAKP,QAA5B,CAAH,GAA2C,CAAC,GAAGF,SAAJ,EAAeE,QAAf,CAAnD,EAA6E;AACnFA,MAAAA,QADmF;AAEnFE,MAAAA,SAAS,EAAEJ,SAFwE;AAGnFU,MAAAA,MAAM,EAAEJ,OAAO,GAAG,QAAH,GAAc,QAHsD;AAInFD,MAAAA,aAAa,EAAEF;AAJoE,KAA7E,CAAR;AAMD,GAjBD;AAkBD;;AAED,MAAMQ,IAAI,GAAGhG,MAAM,CAACN,OAAP,CAAeuG,UAAf,CAA0B,SAASD,IAAT,CAAcE,IAAd,EAAoBC,QAApB,EAA8B;AACnE,MAAIC,kBAAJ;;AAEA,MAAI;AACFhB,IAAAA,QAAQ,GAAG,KADT;AAEFlC,IAAAA,IAAI,GAAG,EAFL;AAGF1D,IAAAA,KAHE;AAIF8F,IAAAA,QAJE;AAKFe,IAAAA,SALE;AAMFC,IAAAA,SANE;AAOFhC,IAAAA,QAPE;AAQFF,IAAAA,QARE;AASFP,IAAAA,UATE;AAUFC,IAAAA,WAVE;AAWFI,IAAAA,UAXE;AAYFqC,IAAAA,OAZE;AAaFC,IAAAA,UAbE;AAcF7C,IAAAA,eAAe,EAAE8C,MAAM,GAAGvG,WAAW,CAACR;AAdpC,MAeAwG,IAfJ;AAAA,MAgBIvD,KAAK,GAAGhB,wBAAwB,CAACuE,IAAD,EAAO,CAAC,UAAD,EAAa,MAAb,EAAqB,OAArB,EAA8B,UAA9B,EAA0C,WAA1C,EAAuD,WAAvD,EAAoE,UAApE,EAAgF,UAAhF,EAA4F,YAA5F,EAA0G,aAA1G,EAAyH,YAAzH,EAAuI,SAAvI,EAAkJ,YAAlJ,EAAgK,iBAAhK,CAAP,CAhBpC;;AAkBA,QAAMQ,EAAE,GAAG,CAAC,GAAGnG,cAAc,CAACoG,aAAnB,GAAX;AACA,QAAMtB,SAAS,GAAG,CAAC,GAAG/E,CAAC,CAACsG,SAAN,EAAiBpH,KAAjB,EAAwB4F,QAAxB,CAAlB;AACA,QAAMyB,WAAW,GAAG,CAAC,GAAG7G,MAAM,CAAC8G,OAAX,EAAoB,MAAMP,OAAO,GAAG,CAAC,GAAGjG,CAAC,CAACyG,iBAAN,EAAyBR,OAAzB,EAAkCrD,IAAlC,CAAH,GAA6C8D,SAA9E,EAAyF,CAAC9D,IAAD,EAAOqD,OAAP,CAAzF,CAApB;AACA,QAAM,CAAC7B,OAAD,EAAUuC,GAAV,IAAiB,CAAC,GAAGxG,eAAe,CAACf,OAApB,GAAvB;AACA,QAAMwH,aAAa,GAAG,CAAC,GAAG5G,CAAC,CAAC6G,WAAN,EAAmB/C,QAAnB,CAAtB;AACA,QAAM;AACJI,IAAAA;AADI,MAEF,CAAC,GAAGpE,SAAS,CAACgH,uBAAd,EAAuC9C,QAAvC,CAFJ;AAGA,QAAM+C,MAAM,GAAG,CAAC,GAAG3G,cAAc,CAAChB,OAAnB,EAA4BuH,GAA5B,EAAiCT,UAAjC,CAAf;AACA,QAAMc,YAAY,GAAG7H,eAAe,CAAC2F,QAAD,EAAWC,SAAX,EAAsBC,QAAtB,CAApC;AACA,QAAMV,cAAc,GAAGjF,wBAAwB,CAAC+E,OAAD,EAAU,IAAV,CAA/C;AACA,MAAI6C,YAAY,GAAG7E,gBAAgB,CAACC,KAAD,CAAnC;AACA,GAAC,GAAG3C,MAAM,CAACwH,mBAAX,EAAgCrB,QAAhC,EAA0C,OAAO;AAC/CvB,IAAAA;AAD+C,GAAP,CAA1C,EAEI,CAACA,cAAD,CAFJ;;AAIA,WAAS6C,YAAT,CAAsBC,IAAtB,EAA4BC,GAA5B,EAAiC;AAC/B,UAAMC,SAAS,GAAGvB,SAAS,CAACwB,IAAV,CAAeH,IAAf,CAAlB;AACA,UAAMI,cAAc,GAAGZ,aAAa,CAACtB,QAAd,CAAuB8B,IAAvB,CAAvB;AACA,UAAMK,cAAc,GAAG1C,SAAS,CAACO,QAAV,CAAmB8B,IAAnB,CAAvB;AACA,WAAO,aAAa1H,MAAM,CAACN,OAAP,CAAesI,aAAf,CAA6BvB,MAA7B,EAAqC;AACvDlB,MAAAA,QAAQ,EAAEmC,IAD6C;AAEvDrG,MAAAA,GAAG,EAAG,QAAOsG,GAAI,EAFsC;AAGvDpE,MAAAA,QAAQ,EAAE+D,YAH6C;AAIvDlD,MAAAA,QAAQ,EAAE0D,cAJ6C;AAKvDG,MAAAA,QAAQ,EAAEF;AAL6C,KAArC,EAMjBlE,UAAU,GAAGA,UAAU,CAAC;AACzB6D,MAAAA,IADyB;AAEzBxD,MAAAA,UAFyB;AAGzBgE,MAAAA,KAAK,EAAEP,GAHkB;AAIzBE,MAAAA,IAAI,EAAED,SAJmB;AAKzB;AACApI,MAAAA,KAAK,EAAE6G,SAAS,CAAC7G,KAAV,CAAgBkI,IAAhB,CANkB;AAOzBtD,MAAAA,QAAQ,EAAE0D;AAPe,KAAD,CAAb,GAQRF,SAde,CAApB;AAeD;;AAED,QAAMO,QAAQ,GAAGtB,WAAW,GAAGA,WAAW,CAACuB,GAAZ,CAAgB,CAAC,CAACC,KAAD,EAAQC,KAAR,CAAD,EAAiBX,GAAjB,KAAyB,aAAa3H,MAAM,CAACN,OAAP,CAAesI,aAAf,CAA6B,KAA7B,EAAoC;AACvHO,IAAAA,IAAI,EAAE,OADiH;AAEvHlH,IAAAA,GAAG,EAAG,SAAQsG,GAAI;AAFqG,GAApC,EAGlF,aAAa3H,MAAM,CAACN,OAAP,CAAesI,aAAf,CAA6B7H,gBAAgB,CAACT,OAA9C,EAAuD,IAAvD,EAA6DoE,WAAW,GAAGA,WAAW,CAAC;AACrGuE,IAAAA;AADqG,GAAD,CAAd,GAEnFA,KAFW,CAHqE,EAKxEC,KAAK,CAACF,GAAN,CAAUX,YAAV,CALwE,CAAtD,CAAH,GAKavE,IAAI,CAACkF,GAAL,CAASX,YAAT,CALzC;AAMA,SAAO,aAAazH,MAAM,CAACN,OAAP,CAAesI,aAAf,CAA6B,KAA7B,EAAoC3I,MAAM,CAACmJ,MAAP,CAAc;AACpE9B,IAAAA,EAAE,EAAEA,EADgE;AAEpE+B,IAAAA,QAAQ,EAAE,CAF0D;AAGpExB,IAAAA,GAAG,EAAEI;AAH+D,GAAd,EAIrDE,YAJqD,EAIvC;AACf,4BAAwB,CAAC,CAACnC,QADX;AAEfkB,IAAAA,SAAS,EAAE,CAAC,GAAG1G,WAAW,CAACF,OAAhB,EAAyB4G,SAAzB,EAAoC,SAApC,CAFI;AAGfiC,IAAAA,IAAI,EAAE,CAACnC,kBAAkB,GAAGmB,YAAY,CAACgB,IAAnC,MAA6C,IAA7C,IAAqDnC,kBAAkB,KAAK,KAAK,CAAjF,GAAqFA,kBAArF,GAA0G;AAHjG,GAJuC,CAApC,EAQhBpG,MAAM,CAACN,OAAP,CAAegJ,QAAf,CAAwBC,KAAxB,CAA8BR,QAA9B,IAA0CA,QAA1C,GAAqD,aAAanI,MAAM,CAACN,OAAP,CAAesI,aAAf,CAA6B,KAA7B,EAAoC;AACxG1B,IAAAA,SAAS,EAAE;AAD6F,GAApC,EAEnE9B,SAAS,EAF0D,CARlD,CAApB;AAWD,CA3EY,CAAb;;AA6EAwB,IAAI,CAAC4C,WAAL,GAAmB,MAAnB;AACA5C,IAAI,CAAC/C,SAAL,GAAiBA,SAAjB;AACA,IAAI4F,QAAQ,GAAG7C,IAAf;AACAzG,OAAO,CAACG,OAAR,GAAkBmJ,QAAlB","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useHandleSelect = useHandleSelect;\nexports.default = exports.useScrollFocusedIntoView = void 0;\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _ListOption = _interopRequireDefault(require(\"./ListOption\"));\n\nvar _ListOptionGroup = _interopRequireDefault(require(\"./ListOptionGroup\"));\n\nvar _messages = require(\"./messages\");\n\nvar CustomPropTypes = _interopRequireWildcard(require(\"./PropTypes\"));\n\nvar _ = require(\"./_\");\n\nvar _WidgetHelpers = require(\"./WidgetHelpers\");\n\nvar _useMutationObserver = _interopRequireDefault(require(\"@restart/hooks/useMutationObserver\"));\n\nvar _useCallbackRef = _interopRequireDefault(require(\"@restart/hooks/useCallbackRef\"));\n\nvar _useMergedRefs = _interopRequireDefault(require(\"@restart/hooks/useMergedRefs\"));\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nconst whitelist = ['style', 'className', 'role', 'id', 'autocomplete', 'size', 'tabIndex', 'maxLength', 'name'];\nconst whitelistRegex = [/^aria-/, /^data-/, /^on[A-Z]\\w+/];\n\nfunction pickElementProps(props) {\n  const result = {};\n  Object.keys(props).forEach(key => {\n    if (whitelist.indexOf(key) !== -1 || whitelistRegex.some(r => !!key.match(r))) result[key] = props[key];\n  });\n  return result;\n}\n\nconst propTypes = {\n  data: _propTypes.default.array,\n  dataKey: CustomPropTypes.accessor,\n  textField: CustomPropTypes.accessor,\n  onSelect: _propTypes.default.func,\n  onMove: _propTypes.default.func,\n  onHoverOption: _propTypes.default.func,\n  optionComponent: _propTypes.default.elementType,\n  renderItem: _propTypes.default.func,\n  renderGroup: _propTypes.default.func,\n  focusedItem: _propTypes.default.any,\n  selectedItem: _propTypes.default.any,\n  searchTerm: _propTypes.default.string,\n  disabled: CustomPropTypes.disabled.acceptsArray,\n  messages: _propTypes.default.shape({\n    emptyList: _propTypes.default.func.isRequired\n  })\n};\n\nconst useScrollFocusedIntoView = (element, observeChanges = false) => {\n  const scrollIntoView = (0, _react.useCallback)(() => {\n    if (!element) return;\n    let selectedItem = element.querySelector('[data-rw-focused]');\n\n    if (selectedItem && selectedItem.scrollIntoView) {\n      selectedItem.scrollIntoView({\n        block: 'nearest',\n        inline: 'nearest'\n      });\n    }\n  }, [element]);\n  (0, _useMutationObserver.default)(observeChanges ? element : null, {\n    subtree: true,\n    attributes: true,\n    attributeFilter: ['data-rw-focused']\n  }, scrollIntoView);\n  return scrollIntoView;\n};\n\nexports.useScrollFocusedIntoView = useScrollFocusedIntoView;\n\nfunction useHandleSelect(multiple, dataItems, onChange) {\n  return (dataItem, event) => {\n    if (multiple === false) {\n      onChange(dataItem, {\n        dataItem,\n        lastValue: dataItems[0],\n        originalEvent: event\n      });\n      return;\n    }\n\n    const checked = dataItems.includes(dataItem);\n    onChange(checked ? dataItems.filter(d => d !== dataItem) : [...dataItems, dataItem], {\n      dataItem,\n      lastValue: dataItems,\n      action: checked ? 'remove' : 'insert',\n      originalEvent: event\n    });\n  };\n}\n\nconst List = _react.default.forwardRef(function List(_ref, outerRef) {\n  var _elementProps$role;\n\n  let {\n    multiple = false,\n    data = [],\n    value,\n    onChange,\n    accessors,\n    className,\n    messages,\n    disabled,\n    renderItem,\n    renderGroup,\n    searchTerm,\n    groupBy,\n    elementRef,\n    optionComponent: Option = _ListOption.default\n  } = _ref,\n      props = _objectWithoutProperties(_ref, [\"multiple\", \"data\", \"value\", \"onChange\", \"accessors\", \"className\", \"messages\", \"disabled\", \"renderItem\", \"renderGroup\", \"searchTerm\", \"groupBy\", \"elementRef\", \"optionComponent\"]);\n\n  const id = (0, _WidgetHelpers.useInstanceId)();\n  const dataItems = (0, _.makeArray)(value, multiple);\n  const groupedData = (0, _react.useMemo)(() => groupBy ? (0, _.groupBySortedKeys)(groupBy, data) : undefined, [data, groupBy]);\n  const [element, ref] = (0, _useCallbackRef.default)();\n  const disabledItems = (0, _.toItemArray)(disabled);\n  const {\n    emptyList\n  } = (0, _messages.useMessagesWithDefaults)(messages);\n  const divRef = (0, _useMergedRefs.default)(ref, elementRef);\n  const handleSelect = useHandleSelect(multiple, dataItems, onChange);\n  const scrollIntoView = useScrollFocusedIntoView(element, true);\n  let elementProps = pickElementProps(props);\n  (0, _react.useImperativeHandle)(outerRef, () => ({\n    scrollIntoView\n  }), [scrollIntoView]);\n\n  function renderOption(item, idx) {\n    const textValue = accessors.text(item);\n    const itemIsDisabled = disabledItems.includes(item);\n    const itemIsSelected = dataItems.includes(item);\n    return /*#__PURE__*/_react.default.createElement(Option, {\n      dataItem: item,\n      key: `item_${idx}`,\n      onSelect: handleSelect,\n      disabled: itemIsDisabled,\n      selected: itemIsSelected\n    }, renderItem ? renderItem({\n      item,\n      searchTerm,\n      index: idx,\n      text: textValue,\n      // TODO: probably remove\n      value: accessors.value(item),\n      disabled: itemIsDisabled\n    }) : textValue);\n  }\n\n  const children = groupedData ? groupedData.map(([group, items], idx) => /*#__PURE__*/_react.default.createElement(\"div\", {\n    role: \"group\",\n    key: `group_${idx}`\n  }, /*#__PURE__*/_react.default.createElement(_ListOptionGroup.default, null, renderGroup ? renderGroup({\n    group\n  }) : group), items.map(renderOption))) : data.map(renderOption);\n  return /*#__PURE__*/_react.default.createElement(\"div\", Object.assign({\n    id: id,\n    tabIndex: 0,\n    ref: divRef\n  }, elementProps, {\n    \"aria-multiselectable\": !!multiple,\n    className: (0, _classnames.default)(className, 'rw-list'),\n    role: (_elementProps$role = elementProps.role) !== null && _elementProps$role !== void 0 ? _elementProps$role : 'listbox'\n  }), _react.default.Children.count(children) ? children : /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: \"rw-list-empty\"\n  }, emptyList()));\n});\n\nList.displayName = 'List';\nList.propTypes = propTypes;\nvar _default = List;\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}