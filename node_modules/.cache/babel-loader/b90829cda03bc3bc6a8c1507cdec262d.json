{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _activeElement = _interopRequireDefault(require(\"dom-helpers/activeElement\"));\n\nvar _canUseDOM = _interopRequireDefault(require(\"dom-helpers/canUseDOM\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _reactDom = require(\"react-dom\");\n\nvar _Input = _interopRequireDefault(require(\"./Input\"));\n\nvar CustomPropTypes = _interopRequireWildcard(require(\"./PropTypes\"));\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function () {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nlet isSign = val => (val || '').trim() === '-';\n\nfunction isPaddedZeros(str, localizer) {\n  let localeChar = localizer.decimalCharacter();\n  let [_, decimals] = str.split(localeChar);\n  return !!(decimals && decimals.match(/0+$/));\n}\n\nfunction isAtDelimiter(str, localizer) {\n  let localeChar = localizer.decimalCharacter();\n  let lastIndex = str.length - 1;\n  if (str.length < 1) return false;\n  let char = str[lastIndex];\n  return !!(char === localeChar && str.indexOf(char) === lastIndex);\n}\n\nclass NumberPickerInput extends _react.default.Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {});\n\n    _defineProperty(this, \"handleBlur\", event => {\n      let str = this.state.stringValue;\n      let number = this.parseNumber(str); // if number is below the min\n      // we need to flush low values and decimal stops, onBlur means i'm done inputing\n\n      if (this.isIntermediateValue(number, str)) {\n        if (isNaN(number)) {\n          number = null;\n        }\n\n        this.props.onChange(number, event);\n      }\n    });\n\n    _defineProperty(this, \"handleChange\", event => {\n      let {\n        value,\n        onChange\n      } = this.props;\n      let stringValue = event.target.value,\n          numberValue = this.parseNumber(stringValue);\n      let isIntermediate = this.isIntermediateValue(numberValue, stringValue);\n\n      if (stringValue == null || stringValue.trim() === '') {\n        this.setStringValue('');\n        onChange(null, event);\n        return;\n      } // order here matters a lot\n\n\n      if (isIntermediate) {\n        this.setStringValue(stringValue);\n      } else if (numberValue !== value) {\n        onChange(numberValue, event);\n      } else if (stringValue != this.state.stringValue) {\n        this.setStringValue(stringValue);\n      }\n    });\n  }\n\n  getSnapshotBeforeUpdate({\n    editing\n  }) {\n    return {\n      reselectText: !editing && this.props.editing && this.isSelectingAllText()\n    };\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    let {\n      value,\n      editing,\n      localizer\n    } = nextProps;\n    let decimal = localizer.decimalCharacter();\n    const stringValue = value == null || isNaN(value) ? '' : editing ? ('' + value).replace('.', decimal) : localizer.formatNumber(value\n    /*, 'default'*/\n    );\n    if (prevState.lastValueFromProps !== stringValue) return {\n      stringValue,\n      lastValueFromProps: stringValue\n    };\n    return null;\n  }\n\n  componentDidUpdate(_, __, {\n    reselectText\n  }) {\n    if (reselectText) (0, _reactDom.findDOMNode)(this).select();\n  } // this intermediate state is for when one runs into\n  // the decimal or are typing the number\n\n\n  setStringValue(stringValue) {\n    this.setState({\n      stringValue\n    });\n  }\n\n  isIntermediateValue(num, str) {\n    let {\n      localizer,\n      min\n    } = this.props;\n    return !!(num < min || isSign(str) || isAtDelimiter(str, localizer) || isPaddedZeros(str, localizer));\n  }\n\n  isSelectingAllText() {\n    const node = _canUseDOM.default && (0, _reactDom.findDOMNode)(this);\n    return _canUseDOM.default && (0, _activeElement.default)() === node && node.selectionStart === 0 && node.selectionEnd === node.value.length;\n  }\n\n  parseNumber(strVal) {\n    let {\n      localizer,\n      parse: userParse\n    } = this.props;\n    let delimChar = localizer.decimalCharacter();\n    if (userParse) return userParse(strVal, localizer);\n    strVal = strVal.replace(delimChar, '.');\n    return parseFloat(strVal);\n  }\n\n  render() {\n    let _this$props = this.props,\n        {\n      disabled,\n      readOnly,\n      placeholder,\n      // eslint-disable-next-line react/prop-types\n      innerRef,\n      min,\n      max,\n      localizer: _,\n      // eslint-disable-next-line no-unused-vars\n      editing: __\n    } = _this$props,\n        props = _objectWithoutProperties(_this$props, [\"disabled\", \"readOnly\", \"placeholder\", \"innerRef\", \"min\", \"max\", \"localizer\", \"editing\"]);\n\n    let value = this.state.stringValue;\n    return /*#__PURE__*/_react.default.createElement(_Input.default, Object.assign({}, props, {\n      ref: innerRef,\n      className: \"rw-widget-input\",\n      onChange: this.handleChange,\n      onBlur: this.handleBlur,\n      \"aria-valuenow\": value\n      /*HACK*/\n      ,\n      \"aria-valuemin\": isFinite(min) ? min : undefined,\n      \"aria-valuemax\": isFinite(max) ? max : undefined,\n      disabled: disabled,\n      readOnly: readOnly,\n      placeholder: placeholder,\n      value: value\n    }));\n  }\n\n}\n\n_defineProperty(NumberPickerInput, \"defaultProps\", {\n  value: null,\n  editing: false\n});\n\n_defineProperty(NumberPickerInput, \"propTypes\", {\n  value: _propTypes.default.number,\n  editing: _propTypes.default.bool,\n  placeholder: _propTypes.default.string,\n  localizer: _propTypes.default.object.isRequired,\n  parse: _propTypes.default.func,\n  min: _propTypes.default.number,\n  max: _propTypes.default.number,\n  disabled: CustomPropTypes.disabled,\n  readOnly: CustomPropTypes.disabled,\n  onChange: _propTypes.default.func.isRequired\n});\n\nvar _default = NumberPickerInput;\nexports.default = _default;","map":{"version":3,"sources":["D:/workspace2021/projectmanagement/client/node_modules/react-widgets/lib/NumberInput.js"],"names":["Object","defineProperty","exports","value","default","_activeElement","_interopRequireDefault","require","_canUseDOM","_propTypes","_react","_reactDom","_Input","CustomPropTypes","_interopRequireWildcard","_getRequireWildcardCache","WeakMap","cache","obj","__esModule","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_objectWithoutProperties","source","excluded","target","_objectWithoutPropertiesLoose","i","getOwnPropertySymbols","sourceSymbolKeys","length","indexOf","propertyIsEnumerable","sourceKeys","keys","_defineProperty","enumerable","configurable","writable","isSign","val","trim","isPaddedZeros","str","localizer","localeChar","decimalCharacter","_","decimals","split","match","isAtDelimiter","lastIndex","char","NumberPickerInput","Component","constructor","args","event","state","stringValue","number","parseNumber","isIntermediateValue","isNaN","props","onChange","numberValue","isIntermediate","setStringValue","getSnapshotBeforeUpdate","editing","reselectText","isSelectingAllText","getDerivedStateFromProps","nextProps","prevState","decimal","replace","formatNumber","lastValueFromProps","componentDidUpdate","__","findDOMNode","select","setState","num","min","node","selectionStart","selectionEnd","strVal","parse","userParse","delimChar","parseFloat","render","_this$props","disabled","readOnly","placeholder","innerRef","max","createElement","assign","ref","className","handleChange","onBlur","handleBlur","isFinite","undefined","bool","string","object","isRequired","func","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _activeElement = _interopRequireDefault(require(\"dom-helpers/activeElement\"));\n\nvar _canUseDOM = _interopRequireDefault(require(\"dom-helpers/canUseDOM\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _reactDom = require(\"react-dom\");\n\nvar _Input = _interopRequireDefault(require(\"./Input\"));\n\nvar CustomPropTypes = _interopRequireWildcard(require(\"./PropTypes\"));\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nlet isSign = val => (val || '').trim() === '-';\n\nfunction isPaddedZeros(str, localizer) {\n  let localeChar = localizer.decimalCharacter();\n  let [_, decimals] = str.split(localeChar);\n  return !!(decimals && decimals.match(/0+$/));\n}\n\nfunction isAtDelimiter(str, localizer) {\n  let localeChar = localizer.decimalCharacter();\n  let lastIndex = str.length - 1;\n  if (str.length < 1) return false;\n  let char = str[lastIndex];\n  return !!(char === localeChar && str.indexOf(char) === lastIndex);\n}\n\nclass NumberPickerInput extends _react.default.Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {});\n\n    _defineProperty(this, \"handleBlur\", event => {\n      let str = this.state.stringValue;\n      let number = this.parseNumber(str); // if number is below the min\n      // we need to flush low values and decimal stops, onBlur means i'm done inputing\n\n      if (this.isIntermediateValue(number, str)) {\n        if (isNaN(number)) {\n          number = null;\n        }\n\n        this.props.onChange(number, event);\n      }\n    });\n\n    _defineProperty(this, \"handleChange\", event => {\n      let {\n        value,\n        onChange\n      } = this.props;\n      let stringValue = event.target.value,\n          numberValue = this.parseNumber(stringValue);\n      let isIntermediate = this.isIntermediateValue(numberValue, stringValue);\n\n      if (stringValue == null || stringValue.trim() === '') {\n        this.setStringValue('');\n        onChange(null, event);\n        return;\n      } // order here matters a lot\n\n\n      if (isIntermediate) {\n        this.setStringValue(stringValue);\n      } else if (numberValue !== value) {\n        onChange(numberValue, event);\n      } else if (stringValue != this.state.stringValue) {\n        this.setStringValue(stringValue);\n      }\n    });\n  }\n\n  getSnapshotBeforeUpdate({\n    editing\n  }) {\n    return {\n      reselectText: !editing && this.props.editing && this.isSelectingAllText()\n    };\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    let {\n      value,\n      editing,\n      localizer\n    } = nextProps;\n    let decimal = localizer.decimalCharacter();\n    const stringValue = value == null || isNaN(value) ? '' : editing ? ('' + value).replace('.', decimal) : localizer.formatNumber(value\n    /*, 'default'*/\n    );\n    if (prevState.lastValueFromProps !== stringValue) return {\n      stringValue,\n      lastValueFromProps: stringValue\n    };\n    return null;\n  }\n\n  componentDidUpdate(_, __, {\n    reselectText\n  }) {\n    if (reselectText) (0, _reactDom.findDOMNode)(this).select();\n  } // this intermediate state is for when one runs into\n  // the decimal or are typing the number\n\n\n  setStringValue(stringValue) {\n    this.setState({\n      stringValue\n    });\n  }\n\n  isIntermediateValue(num, str) {\n    let {\n      localizer,\n      min\n    } = this.props;\n    return !!(num < min || isSign(str) || isAtDelimiter(str, localizer) || isPaddedZeros(str, localizer));\n  }\n\n  isSelectingAllText() {\n    const node = _canUseDOM.default && (0, _reactDom.findDOMNode)(this);\n    return _canUseDOM.default && (0, _activeElement.default)() === node && node.selectionStart === 0 && node.selectionEnd === node.value.length;\n  }\n\n  parseNumber(strVal) {\n    let {\n      localizer,\n      parse: userParse\n    } = this.props;\n    let delimChar = localizer.decimalCharacter();\n    if (userParse) return userParse(strVal, localizer);\n    strVal = strVal.replace(delimChar, '.');\n    return parseFloat(strVal);\n  }\n\n  render() {\n    let _this$props = this.props,\n        {\n      disabled,\n      readOnly,\n      placeholder,\n      // eslint-disable-next-line react/prop-types\n      innerRef,\n      min,\n      max,\n      localizer: _,\n      // eslint-disable-next-line no-unused-vars\n      editing: __\n    } = _this$props,\n        props = _objectWithoutProperties(_this$props, [\"disabled\", \"readOnly\", \"placeholder\", \"innerRef\", \"min\", \"max\", \"localizer\", \"editing\"]);\n\n    let value = this.state.stringValue;\n    return /*#__PURE__*/_react.default.createElement(_Input.default, Object.assign({}, props, {\n      ref: innerRef,\n      className: \"rw-widget-input\",\n      onChange: this.handleChange,\n      onBlur: this.handleBlur,\n      \"aria-valuenow\": value\n      /*HACK*/\n      ,\n      \"aria-valuemin\": isFinite(min) ? min : undefined,\n      \"aria-valuemax\": isFinite(max) ? max : undefined,\n      disabled: disabled,\n      readOnly: readOnly,\n      placeholder: placeholder,\n      value: value\n    }));\n  }\n\n}\n\n_defineProperty(NumberPickerInput, \"defaultProps\", {\n  value: null,\n  editing: false\n});\n\n_defineProperty(NumberPickerInput, \"propTypes\", {\n  value: _propTypes.default.number,\n  editing: _propTypes.default.bool,\n  placeholder: _propTypes.default.string,\n  localizer: _propTypes.default.object.isRequired,\n  parse: _propTypes.default.func,\n  min: _propTypes.default.number,\n  max: _propTypes.default.number,\n  disabled: CustomPropTypes.disabled,\n  readOnly: CustomPropTypes.disabled,\n  onChange: _propTypes.default.func.isRequired\n});\n\nvar _default = NumberPickerInput;\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}