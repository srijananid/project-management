{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _uncontrollable = require(\"uncontrollable\");\n\nvar _List = _interopRequireWildcard(require(\"./List\"));\n\nvar _FocusListContext = require(\"./FocusListContext\");\n\nvar CustomPropTypes = _interopRequireWildcard(require(\"./PropTypes\"));\n\nvar _ = require(\"./_\");\n\nvar _Accessors = require(\"./Accessors\");\n\nvar _WidgetHelpers = require(\"./WidgetHelpers\");\n\nvar _useFocusManager = _interopRequireDefault(require(\"./useFocusManager\"));\n\nvar _Widget = require(\"./Widget\");\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function () {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nconst propTypes = {\n  data: _propTypes.default.array,\n  dataKey: CustomPropTypes.accessor,\n  textField: CustomPropTypes.accessor,\n  onSelect: _propTypes.default.func,\n  onMove: _propTypes.default.func,\n  onHoverOption: _propTypes.default.func,\n  optionComponent: _propTypes.default.elementType,\n  renderItem: _propTypes.default.func,\n  renderGroup: _propTypes.default.func,\n  focusedItem: _propTypes.default.any,\n  selectedItem: _propTypes.default.any,\n  searchTerm: _propTypes.default.string,\n  disabled: CustomPropTypes.disabled.acceptsArray,\n  messages: _propTypes.default.shape({\n    emptyList: _propTypes.default.func.isRequired\n  })\n};\n\nconst Listbox = _react.default.forwardRef(function Listbox(_ref, _outerRef) {\n  let {\n    defaultValue,\n    value: propsValue,\n    onChange: propsOnChange,\n    textField,\n    dataKey,\n    data,\n    onKeyDown,\n    disabled,\n    readOnly,\n    onBlur,\n    onFocus,\n    multiple\n  } = _ref,\n      props = _objectWithoutProperties(_ref, [\"defaultValue\", \"value\", \"onChange\", \"textField\", \"dataKey\", \"data\", \"onKeyDown\", \"disabled\", \"readOnly\", \"onBlur\", \"onFocus\", \"multiple\"]);\n\n  const [value, onChange] = (0, _uncontrollable.useUncontrolledProp)(propsValue, defaultValue, propsOnChange);\n  const accessors = (0, _Accessors.useAccessors)(textField, dataKey);\n  const dataItems = (0, _react.useMemo)(() => (0, _.makeArray)(value, multiple).map(item => accessors.findOrSelf(data, item)), [value, multiple, accessors, data]);\n  const ref = (0, _react.useRef)(null);\n  const lastItemRef = (0, _react.useRef)(dataItems[dataItems.length - 1]);\n  const list = (0, _FocusListContext.useFocusList)({\n    scope: ref,\n    anchorItem: lastItemRef.current\n  });\n  const isDisabled = disabled === true;\n\n  const handleChange = (dataItem, meta) => {\n    if (isDisabled || readOnly) return;\n    lastItemRef.current = meta.dataItem;\n    onChange(dataItem, meta);\n  };\n\n  const handleSelect = (0, _List.useHandleSelect)(!!multiple, dataItems, handleChange);\n  const [focusEvents, focused] = (0, _useFocusManager.default)(ref, {\n    disabled: isDisabled,\n    onBlur,\n    onFocus\n  }, {\n    didHandle(focused) {\n      if (!focused) {\n        list.focus(undefined);\n      } else {\n        focus({\n          preventScroll: true\n        });\n      }\n    }\n\n  });\n\n  function focus(opts) {\n    if (ref.current) ref.current.focus(opts);\n  }\n\n  const handleKeyDown = e => {\n    if (isDisabled || readOnly) return;\n    let {\n      key,\n      shiftKey\n    } = e;\n    (0, _WidgetHelpers.notify)(onKeyDown, [e]);\n    if (e.defaultPrevented) return;\n\n    if (key === 'End' && !shiftKey) {\n      e.preventDefault();\n      list.focus(list.last());\n    } else if (key === 'Home' && !shiftKey) {\n      e.preventDefault();\n      list.focus(list.first());\n    } else if (key === 'Enter' || key === ' ') {\n      e.preventDefault();\n      if (list.getFocused()) handleSelect(list.getFocused(), e);\n    } else if (key === 'ArrowDown') {\n      e.preventDefault();\n      list.focus(list.next());\n    } else if (key === 'ArrowUp') {\n      e.preventDefault();\n      list.focus(list.prev());\n    }\n  };\n\n  const widgetProps = (0, _Widget.useWidgetProps)({\n    focused,\n    readOnly,\n    disabled: isDisabled,\n    className: (0, _classnames.default)(props.className, 'rw-listbox rw-widget-input rw-widget')\n  });\n  return /*#__PURE__*/_react.default.createElement(_FocusListContext.FocusListContext.Provider, {\n    value: list.context\n  }, /*#__PURE__*/_react.default.createElement(_List.default, Object.assign({}, props, widgetProps, {\n    disabled: disabled,\n    tabIndex: isDisabled ? -1 : 0,\n    data: data,\n    elementRef: ref,\n    value: dataItems,\n    multiple: multiple,\n    accessors: accessors\n  }, focusEvents, {\n    onChange: handleChange,\n    onKeyDown: handleKeyDown\n  })));\n});\n\nListbox.displayName = 'Listbox';\nListbox.propTypes = propTypes;\nvar _default = Listbox;\nexports.default = _default;","map":{"version":3,"sources":["D:/workspace2021/projectmanagement/client/node_modules/react-widgets/lib/Listbox.js"],"names":["Object","defineProperty","exports","value","default","_propTypes","_interopRequireDefault","require","_classnames","_react","_interopRequireWildcard","_uncontrollable","_List","_FocusListContext","CustomPropTypes","_","_Accessors","_WidgetHelpers","_useFocusManager","_Widget","_getRequireWildcardCache","WeakMap","cache","obj","__esModule","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_objectWithoutProperties","source","excluded","target","_objectWithoutPropertiesLoose","i","getOwnPropertySymbols","sourceSymbolKeys","length","indexOf","propertyIsEnumerable","sourceKeys","keys","propTypes","data","array","dataKey","accessor","textField","onSelect","func","onMove","onHoverOption","optionComponent","elementType","renderItem","renderGroup","focusedItem","any","selectedItem","searchTerm","string","disabled","acceptsArray","messages","shape","emptyList","isRequired","Listbox","forwardRef","_ref","_outerRef","defaultValue","propsValue","onChange","propsOnChange","onKeyDown","readOnly","onBlur","onFocus","multiple","props","useUncontrolledProp","accessors","useAccessors","dataItems","useMemo","makeArray","map","item","findOrSelf","ref","useRef","lastItemRef","list","useFocusList","scope","anchorItem","current","isDisabled","handleChange","dataItem","meta","handleSelect","useHandleSelect","focusEvents","focused","didHandle","focus","undefined","preventScroll","opts","handleKeyDown","e","shiftKey","notify","defaultPrevented","preventDefault","last","first","getFocused","next","prev","widgetProps","useWidgetProps","className","createElement","FocusListContext","Provider","context","assign","tabIndex","elementRef","displayName","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _uncontrollable = require(\"uncontrollable\");\n\nvar _List = _interopRequireWildcard(require(\"./List\"));\n\nvar _FocusListContext = require(\"./FocusListContext\");\n\nvar CustomPropTypes = _interopRequireWildcard(require(\"./PropTypes\"));\n\nvar _ = require(\"./_\");\n\nvar _Accessors = require(\"./Accessors\");\n\nvar _WidgetHelpers = require(\"./WidgetHelpers\");\n\nvar _useFocusManager = _interopRequireDefault(require(\"./useFocusManager\"));\n\nvar _Widget = require(\"./Widget\");\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nconst propTypes = {\n  data: _propTypes.default.array,\n  dataKey: CustomPropTypes.accessor,\n  textField: CustomPropTypes.accessor,\n  onSelect: _propTypes.default.func,\n  onMove: _propTypes.default.func,\n  onHoverOption: _propTypes.default.func,\n  optionComponent: _propTypes.default.elementType,\n  renderItem: _propTypes.default.func,\n  renderGroup: _propTypes.default.func,\n  focusedItem: _propTypes.default.any,\n  selectedItem: _propTypes.default.any,\n  searchTerm: _propTypes.default.string,\n  disabled: CustomPropTypes.disabled.acceptsArray,\n  messages: _propTypes.default.shape({\n    emptyList: _propTypes.default.func.isRequired\n  })\n};\n\nconst Listbox = _react.default.forwardRef(function Listbox(_ref, _outerRef) {\n  let {\n    defaultValue,\n    value: propsValue,\n    onChange: propsOnChange,\n    textField,\n    dataKey,\n    data,\n    onKeyDown,\n    disabled,\n    readOnly,\n    onBlur,\n    onFocus,\n    multiple\n  } = _ref,\n      props = _objectWithoutProperties(_ref, [\"defaultValue\", \"value\", \"onChange\", \"textField\", \"dataKey\", \"data\", \"onKeyDown\", \"disabled\", \"readOnly\", \"onBlur\", \"onFocus\", \"multiple\"]);\n\n  const [value, onChange] = (0, _uncontrollable.useUncontrolledProp)(propsValue, defaultValue, propsOnChange);\n  const accessors = (0, _Accessors.useAccessors)(textField, dataKey);\n  const dataItems = (0, _react.useMemo)(() => (0, _.makeArray)(value, multiple).map(item => accessors.findOrSelf(data, item)), [value, multiple, accessors, data]);\n  const ref = (0, _react.useRef)(null);\n  const lastItemRef = (0, _react.useRef)(dataItems[dataItems.length - 1]);\n  const list = (0, _FocusListContext.useFocusList)({\n    scope: ref,\n    anchorItem: lastItemRef.current\n  });\n  const isDisabled = disabled === true;\n\n  const handleChange = (dataItem, meta) => {\n    if (isDisabled || readOnly) return;\n    lastItemRef.current = meta.dataItem;\n    onChange(dataItem, meta);\n  };\n\n  const handleSelect = (0, _List.useHandleSelect)(!!multiple, dataItems, handleChange);\n  const [focusEvents, focused] = (0, _useFocusManager.default)(ref, {\n    disabled: isDisabled,\n    onBlur,\n    onFocus\n  }, {\n    didHandle(focused) {\n      if (!focused) {\n        list.focus(undefined);\n      } else {\n        focus({\n          preventScroll: true\n        });\n      }\n    }\n\n  });\n\n  function focus(opts) {\n    if (ref.current) ref.current.focus(opts);\n  }\n\n  const handleKeyDown = e => {\n    if (isDisabled || readOnly) return;\n    let {\n      key,\n      shiftKey\n    } = e;\n    (0, _WidgetHelpers.notify)(onKeyDown, [e]);\n    if (e.defaultPrevented) return;\n\n    if (key === 'End' && !shiftKey) {\n      e.preventDefault();\n      list.focus(list.last());\n    } else if (key === 'Home' && !shiftKey) {\n      e.preventDefault();\n      list.focus(list.first());\n    } else if (key === 'Enter' || key === ' ') {\n      e.preventDefault();\n      if (list.getFocused()) handleSelect(list.getFocused(), e);\n    } else if (key === 'ArrowDown') {\n      e.preventDefault();\n      list.focus(list.next());\n    } else if (key === 'ArrowUp') {\n      e.preventDefault();\n      list.focus(list.prev());\n    }\n  };\n\n  const widgetProps = (0, _Widget.useWidgetProps)({\n    focused,\n    readOnly,\n    disabled: isDisabled,\n    className: (0, _classnames.default)(props.className, 'rw-listbox rw-widget-input rw-widget')\n  });\n  return /*#__PURE__*/_react.default.createElement(_FocusListContext.FocusListContext.Provider, {\n    value: list.context\n  }, /*#__PURE__*/_react.default.createElement(_List.default, Object.assign({}, props, widgetProps, {\n    disabled: disabled,\n    tabIndex: isDisabled ? -1 : 0,\n    data: data,\n    elementRef: ref,\n    value: dataItems,\n    multiple: multiple,\n    accessors: accessors\n  }, focusEvents, {\n    onChange: handleChange,\n    onKeyDown: handleKeyDown\n  })));\n});\n\nListbox.displayName = 'Listbox';\nListbox.propTypes = propTypes;\nvar _default = Listbox;\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}